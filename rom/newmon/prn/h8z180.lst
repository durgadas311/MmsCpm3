		; H8 Z80-CPU v3.2 Monitor (EEPROM 28C256)
0020          	VERN	equ	020h	; ROM version
		
0000          	false	equ	0
FFFF          	true	equ	not false
		
0000          	alpha	equ	0
0003          	beta	equ	3
		
FFFF          	z180	equ	true
		
			maclib	ram
**** ram.lib ****
**** h8z180.asm ****
			maclib	setup
**** setup.lib ****
**** h8z180.asm ****
FFFF          	if z180
			maclib	z180
**** z180.lib ****
**** h8z180.asm ****
FFFF          	use$dma	equ	true
F180          	pcode	equ	0f180h
		else
		endif
			$*macro
		
000D          	CR	equ	13
000A          	LF	equ	10
0007          	BEL	equ	7
0009          	TAB	equ	9
001B          	ESC	equ	27
0000          	TRM	equ	0
007F          	DEL	equ	127
		
		; ctrl port F2 bit definitions
0002          	ctl$CLK		equ	00000010b	; enable H89 2mS clock (not used here)
0008          	ctl$MEM1	equ	00001000b	; maps full ROM (if !ORG0)
0020          	ctl$ORG0	equ	00100000b	; maps full RAM
0080          	ctl$IO1		equ	10000000b	; enables EEPROM write
		
FFFF          	if z180
		; Z180 internal registers (I/O ports) - CCR
0034          	itc	equ	34h
0038          	mmu$cbr	equ	38h
0039          	mmu$bbr	equ	39h
003A          	mmu$cbar equ	3ah
0020          	sar0l	equ	20h
0021          	sar0h	equ	21h
0022          	sar0b	equ	22h
0023          	dar0l	equ	23h
0024          	dar0h	equ	24h
0025          	dar0b	equ	25h
0026          	bcr0l	equ	26h
0027          	bcr0h	equ	27h
0030          	dstat	equ	30h
0031          	dmode	equ	31h
0032          	dcntl	equ	32h
		endif
		
3000          	memtest	equ	03000h
C000          	ramboot	equ	0c000h
		; fudge this... H17 junk
1F5A          	R$CONST	equ	01f5ah	; 037.132 R.CONST block...
1C19          	CLOCK	equ	01c19h	; 034.031 CLOCK
		
		; offsets in a module
0000          	mdpgs	equ	0	; num pages
0001          	mdorg	equ	1	; ORG for module (run/load addr)
0002          	mdbase	equ	2	; base phy drv num
0003          	mdluns	equ	3	; num LUNs
0004          	mdinit	equ	4	; init entry point
0007          	mdboot	equ	7	; boot entry point
000A          	mdchr	equ	10	; device letter
000B          	mdkey	equ	11	; device key
000C          	mdport	equ	12	; device port, 0 if variable
000D          	mddisp	equ	13	; boot front panel mnemonic
0010          	mdname	equ	16	; boot string
		
FFFF          	if z180
		; Where ROM is mapped-in for searching...
4000          	btmap	equ	4000h
6000          	btmods	equ	btmap+2000h
C000          	bterom	equ	btmap+8000h
		else
		endif
		
0010          	rptcnt	equ	16
0001          	debounce equ	1
		
		; Start of ROM code
0000          		org	00000h
		
0000          	rombeg:
0000  F3      	rst0:	di	; can't be JMP or Heath CP/M thinks we're an H89
0001  C37803  		jmp	init
		
0004  C30A02  		jmp	getport
0007  00      		db	0
		
0008  CD6A00  	rst1:	call	intsetup
000B  2A1B20  		lhld	ticcnt
000E  C35E00  		jmp	int1$cont
0000          	if ((high int1$cont) <> 0)
		endif
		
0010          	rst2	equ	$-1	; must be a nop...
0011  CD6A00  		call	intsetup
0014  1A      		ldax	d
0015  C39001  		jmp	int2$cont
		
0018  C32520  	rst3:	jmp	vrst3
		
001B  C39909  		jmp	crlf
001E  0000    		db	0,0
		
0020  C32820  	rst4:	jmp	vrst4
		
0023  000000  		db	0,0,0	; overlayed by WizNet boot, others
0026  0704    		dw	conout	; pointer, not vector; A=char
		
0028  C32B20  	rst5:	jmp	vrst5
		
002B  C33002  		jmp	delay
002E  3F00    	qmsg:	db	'?',TRM
		
0030  C32E20  	rst6:	jmp	vrst6
		
0033  00000000		db	0,0,0,0,0	; overlayed by WizNet boot, others
      00
		
0038  C33120  	rst7:	jmp	vrst7
		
		; routines made public (to modules)
003B  C36B03  		jmp	hwboot
003E  C36F03  		jmp	hxboot
0041  C39F01  		jmp	take$A
0044  C3A309  		jmp	msgout
		
0047          	intret:
0047  F1      		pop	psw
0048  F1      		pop	psw
0049  C1      		pop	b
004A  D1      		pop	d
004B  E1      		pop	h
004C          		popix
004C  DDE1    		DB	0DDH,0E1H
004E          		popiy
004E  FDE1    		DB	0FDH,0E1H
0050          		exx
0050  D9      		DB	0D9H
0051          		exaf
0051  08      		DB	08H
0052  C1      		pop	b	; I,R - R cannot be restored
0053  78      		mov	a,b
0054          		stai
0054  ED47    		DB	0EDH,47H
0056  F1      		pop	psw
0057  C1      		pop	b
0058  D1      		pop	d
0059  E1      		pop	h
005A          		exx
005A  D9      		DB	0D9H
005B          		exaf
005B  08      		DB	08H
005C          	nulint:
005C  FB      		ei
005D  C9      		ret
		
005E          	int1$cont:
005E  23      		inx	h
005F  221B20  		shld	ticcnt
0062  3A3620  		lda	ctl$F2
0065  D3F2    		out	0f2h
0067  C3320B  		jmp	int1$fp
		
		; TODO: save Z80 registers...
006A          	intsetup:
006A          		exx
006A  D9      		DB	0D9H
006B          		exaf
006B  08      		DB	08H
006C  E3      		xthl	; HL=PC (ret adr)
006D  D5      		push	d
006E  C5      		push	b
006F  F5      		push	psw
0070          		ldar
0070  ED5F    		DB	0EDH,5FH
0072  4F      		mov	c,a
0073          		ldai
0073  ED57    		DB	0EDH,57H
0075  47      		mov	b,a
0076  C5      		push	b
0077          		pushiy
0077  FDE5    		DB	0FDH,0E5H
0079          		pushix
0079  DDE5    		DB	0DDH,0E5H
007B  E5      		push	h	; save PC
007C          		exx
007C  D9      		DB	0D9H
007D          		exaf
007D  08      		DB	08H
007E  E3      		xthl		; HL=PC
007F  D5      		push	d
0080  C5      		push	b
0081  F5      		push	psw
0082  EB      		xchg		; DE=PC
0083  211800  		lxi	h,nReg-2
0086  39      		dad	sp
0087  E5      		push	h
0088  D5      		push	d	; save PC
0089  110920  		lxi	d,ctl$F0
008C  1A      		ldax	d
008D  2F      		cma
008E  E630    		ani	030h
0090  C8      		rz
0091  210200  		lxi	h,2
0094  39      		dad	sp
0095  221D20  		shld	monstk	; a.k.a. RegPtr
0098  C9      		ret
		
0099          	re$entry:		; re-entry point for errors, etc.
0099  210920  		lxi	h,ctl$F0
009C  36F0    		mvi	m,0f0h	; !beep, 2mS, MON, !SI
009E  2A1D20  		lhld	monstk
00A1  F9      		sphl
00A2  CD0504  		call	belout	; TODO: beep front panel if appropriate
			;jmp	start
00A5          	start:
00A5  21A500  		lxi	h,start
00A8  E5      		push	h
			; reset FP display... this doesn't make a lot of sense...
00A9  3A0720  		lda	DspMod
00AC  E601    		ani	00000001b
00AE  2F      		cma
00AF  320620  		sta	DsProt
00B2  FB      		ei
			; avoid prompt if last was keypad command...
00B3  21D406  		lxi	h,prompt
00B6  3A3B20  		lda	lstcmd
00B9  B7      		ora	a
00BA  F4A309  		cp	msgout
00BD          	prloop:
			; could take one of two paths here,
			; console or kaypad...
00BD  CDD209  		call	cmdin
00C0  E6DF    		ani	11011111b ; toupper
00C2  323B20  		sta	lstcmd
00C5  FAE708  		jm	kpcmd	; from keypad... jumps back here...
00C8  21D800  	cmchr:	lxi	h,cmdtab
00CB  061C    		mvi	b,numcmd
00CD          	cmloop:
00CD  BE      		cmp	m
00CE  23      		inx	h
00CF          		jrz	docmd
00CF  2869    		DB	28H,docmd-$-1
00D1  23      		inx	h
00D2  23      		inx	h
00D3          		djnz	cmloop
00D3  10F8    		DB	10H,cmloop-$-1
00D5  C30807  		jmp	nocmd
		
00D8          	cmdtab:
			; console commands
00D8  44      		db	'D' !
00D9  740D    	 dw cmddmp	; Dump memory
00DB  47      		db	'G' !
00DC  6701    	 dw cmdgo	; Go
00DE  53      		db	'S' !
00DF  AC03    	 dw cmdsub	; Substitute in memory
00E1  50      		db	'P' !
00E2  4301    	 dw cmdpc	; Set PC
00E4  42      		db	'B' !
00E5  8502    	 dw cmdboot; Boot
00E7  4D      		db	'M' !
00E8  AA04    	 dw cmdmt	; Memory Test
00EA  54      		db	'T' !
00EB  5C0E    	 dw termod	; Terminal Mode
00ED  56      		db	'V' !
00EE  B10E    	 dw prtver	; Version of ROM
00F0  4C      		db	'L' !
00F1  B20D    	 dw cmdlb	; List boot modules
00F3  48      		db	'H' !
00F4  EF0D    	 dw cmdhb	; long list (Help) boot modules
00F6  41      		db	'A' !
00F7  5A0E    	 dw cmdab	; Add boot module
00F9  55      		db	'U' !
00FA  5B0E    	 dw cmdur	; Update entire ROM
			; front-panel commands    key(old)  command/action
00FC  80      		db	80h !
00FD  3107    	 dw kpubt	; [0]     - Universal Boot
00FF  81      		db	81h !
0100  EF07    	 dw kppbt	; [1]     - Pri Boot
0102  82      		db	82h !
0103  2F08    	 dw kpsbt	; [2]     - Sec Boot
0105  83      		db	83h !
0106  4808    	 dw kprdx	; [3]     - Radix Mode
0108  84      		db	84h !
0109  5306    	 dw kpgo	; [4]     - Go
010B  85      		db	85h !
010C  5C06    	 dw kpin	; [5]     - Input
010E  86      		db	86h !
010F  6606    	 dw kpout	; [6]     - Output
0111  87      		db	87h !
0112  7606    	 dw kpsst	; [7]     - Single Step
0114  88      		db	88h !
0115  3708    	 dw kptap	; [8]     - Cass Load
0117  89      		db	89h !
0118  3708    	 dw kptap	; [9]     - Cass Store
011A  8A      		db	8ah !
011B  8108    	 dw kpnxt	; [A] [+] - Next
011D  8B      		db	8bh !
011E  9908    	 dw kpprv	; [B] [-] - Prev
0120  8C      		db	8ch !
0121  6C06    	 dw kpabt	; [C] [*] - CANCEL, usually
0123  8D      		db	8dh !
0124  6D06    	 dw kprw	; [D] [/] - Display/Alter
0126  8E      		db	8eh !
0127  B408    	 dw kpmem	; [E] [#] - Memory Mode
0129  8F      		db	8fh !
012A  C908    	 dw kprgm	; [F] [.] - Register Mode
001C          	numcmd	equ	($-cmdtab)/3
		
			rept	0137h-$
012C  FF      		db	0ffh
012D  FF      		db	0ffh
012E  FF      		db	0ffh
012F  FF      		db	0ffh
0130  FF      		db	0ffh
0131  FF      		db	0ffh
0132  FF      		db	0ffh
0133  FF      		db	0ffh
0134  FF      		db	0ffh
0135  FF      		db	0ffh
0136  FF      		db	0ffh
0000          	if	($ <> 0137h)
		endif
0137  C30000  		jmp	0	; initialized by H47 boot module
		
013A          	docmd:
013A  B7      		ora	a
013B  F40704  		cp	conout
013E  4E      		mov	c,m
013F  23      		inx	h
0140  66      		mov	h,m
0141  69      		mov	l,c
0142  E9      	icall:	pchl
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; PC command (set PC)
0143          	cmdpc:
0143  21EE06  		lxi	h,pcms
0146  CDA309  		call	msgout
0149  2A1D20  		lhld	RegPtr
014C  111800  		lxi	d,24	; Reg[PC]
014F  19      		dad	d
0150  5E      		mov	e,m
0151  23      		inx	h
0152  56      		mov	d,m
0153  2B      		dcx	h
0154  EB      		xchg		; HL=PC, DE=adr to store
0155  CDF503  		call	inhexcr
0158          		jrc	cmdpc0	; hex digit entered
0158  3807    		DB	38H,cmdpc0-$-1
015A  CD6204  		call	adrnl	; show current PC (HL)
015D  CDF503  		call	inhexcr	; get another char
0160  D0      		rnc	; CR entered, don't update value
0161          	cmdpc0:
0161  EB      		xchg	; HL=adr to store
0162          	cmdpc1:
0162  160D    		mvi	d,CR
0164  C31204  		jmp	adrin
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Go command
0167          	cmdgo:
0167  21E006  		lxi	h,goms
016A  CDA309  		call	msgout
016D  2A1D20  		lhld	RegPtr
0170  111800  		lxi	d,24	; Reg[PC]
0173  19      		dad	d	; HL=adr to store
0174  CDF503  		call	inhexcr
0177  DC6201  		cc	cmdpc1	; read HEX until CR, store in HL
017A  CD9909  		call	crlf
017D  3ED0    		mvi	a,0d0h	; no-beep, 2mS, !MON, !single-step
017F          		jr	cmdgo0
017F  1808    		DB	18H,cmdgo0-$-1
0181  F3      		di	; TODO: dead code? single-step...
0182  3A0920  		lda	ctl$F0
0185  EE10    		xri	010h	; toggle single-step
0187  D3F0    		out	0f0h
0189          	cmdgo0:
0189  320920  		sta	ctl$F0
018C  E1      		pop	h
018D  C34700  		jmp	intret
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
0190          	int2$cont:
0190  F610    		ori	010h	; disable single-step
0192  D3F0    		out	0f0h
0194  12      		stax	d
0195  E620    		ani	020h	; MON active?
0197  C2A500  		jnz	start	; break to monitor code
019A  C32220  		jmp	vrst2	; else chain to (possible) user code.
		
019D          	take$5:
019D  3E05    		mvi	a,5	; 5 seconds
019F          	take$A:	; set a timeout for A seconds
019F  21AF01  		lxi	h,timeout
01A2  222020  		shld	vrst1+1
01A5  325221  		sta	SEC$CNT
01A8  3E01    		mvi	a,1
01AA  320820  		sta	MFlag
01AD  FB      		ei
01AE  C9      		ret
		
01AF          	timeout:
01AF  211B20  		lxi	h,ticcnt
01B2  AF      		xra	a
01B3  B6      		ora	m
01B4  C0      		rnz
01B5  23      		inx	h
01B6  7E      		mov	a,m
01B7  0F      		rrc
01B8  D8      		rc
			; every 512 ticks... 1024mS
01B9  215221  		lxi	h,SEC$CNT
01BC  35      		dcr	m
01BD  C0      		rnz
01BE          	error:
01BE  2A1D20  		lhld	monstk
01C1  F9      		sphl
01C2  212E00  		lxi	h,qmsg
01C5  CDA309  		call	msgout
01C8  215C00  		lxi	h,nulint
01CB  222020  		shld	vrst1+1
01CE  320820  		sta	MFlag
01D1  DBF2    		in	0f2h
01D3  E603    		ani	00000011b
01D5          		jrnz	error0
01D5  2002    		DB	20H,error0-$-1
01D7  D37F    		out	07fh
01D9          	error0:
01D9  C39900  		jmp	re$entry
		
		; determine device for port 078H
		; return phy drv number in D.
01DC          	gtdev1:
01DC  1600    		mvi	d,0	; Z17
01DE  DBF2    		in	0f2h
01E0          	gtdev0:
01E0  E603    		ani	00000011b	; port 078H device
01E2  C8      		rz		; Z17 (or Z37)
01E3  FE01    		cpi	01b
01E5  1605    		mvi	d,5
01E7  C8      		rz		; Z47
01E8  FE02    		cpi	10b
01EA  1603    		mvi	d,3	; Z67/MMS77320
01EC  C8      		rz
01ED  16FF    		mvi	d,0ffh
01EF  C9      		ret	; NZ
		
		; determine device for port 078H
		; return phy drv number in D.
01F0          	gtdev2:
01F0  162E    		mvi	d,46	; Z37
01F2  DBF2    		in	0f2h
01F4  0F      		rrc
01F5  0F      		rrc
01F6          		jr	gtdev0	; rest are same
01F6  18E8    		DB	18H,gtdev0-$-1
		
		; determine default boot device.
01F8          	gtdfbt:
01F8  110000  		lxi	d,0
01FB  DBF2    		in	0f2h
01FD  E670    		ani	01110000b	; default boot selection
01FF  FE20    		cpi	00100000b	; device at 07CH
0201          		jrz	gtdev1
0201  28D9    		DB	28H,gtdev1-$-1
0203  FE30    		cpi	00110000b	; device at 078H
0205          		jrz	gtdev2
0205  28E9    		DB	28H,gtdev2-$-1
0207  C3A30C  		jmp	gtdvtb		; get MMS device
		
		; Check SW501 for installed device.
		; C = desired port pattern, 00=Z17/Z37, 01=Z47, 10=Z67, 11=undefined
		; returns base I/O port adr in B.
020A          	getport:
020A  067C    		mvi	b,07ch
020C  DBF2    		in	0f2h
020E  E603    		ani	003h
0210  B9      		cmp	c
0211  C8      		rz
0212  0678    		mvi	b,078h
0214  DBF2    		in	0f2h
0216  0F      		rrc
0217  0F      		rrc
0218  E603    		ani	003h
021A  B9      		cmp	c
021B  C9      		ret	; let caller decide error handling (NZ)
		
021C  212502  	s501er:	lxi	h,s501ms
021F  CDA309  		call	msgout
0222  C39900  		jmp	re$entry
		
0225  20535731	s501ms:	db	' SW1 wrong',TRM
      2077726F
      6E6700
		
0230          	delay:
0230  E5      		push	h
0231  211B20  		lxi	h,ticcnt
0234  86      		add	m
0235          	delay0:
0235  BE      		cmp	m
0236          		jrnz	delay0
0236  20FD    		DB	20H,delay0-$-1
0238  E1      		pop	h
0239  C9      		ret
		
023A          	digerr:
023A  CD0504  		call	belout
023D          		jr	btdig0
023D  1806    		DB	18H,btdig0-$-1
		; Got a digit in boot command, parse it
023F          	btdig:	; boot by phys drive number, E=0
023F  CD0704  		call	conout	; echo digit
0242  E60F    		ani	00fh	; convert to binary
0244  57      		mov	d,a
0245          	btdig0:
0245  CDAC09  		call	conin	; get another, until term char (C)
0248  B9      		cmp	c
0249          		jrz	gotnum
0249  281D    		DB	28H,gotnum-$-1
024B  FE30    		cpi	'0'
024D          		jrc	digerr
024D  38EB    		DB	38H,digerr-$-1
024F  FE3A    		cpi	'9'+1
0251          		jrnc	digerr
0251  30E7    		DB	30H,digerr-$-1
0253  CD0704  		call	conout
0256  E60F    		ani	00fh
0258  060A    		mvi	b,10	; add 10 times, i.e. D = (D * 10) + A
025A          	btdig1:
025A  82      		add	d
025B  DABE01  		jc	error
025E          		djnz	btdig1
025E  10FA    		DB	10H,btdig1-$-1
0260  57      		mov	d,a
0261  FEC8    		cpi	200
0263  D2BE01  		jnc	error
0266          		jr	btdig0
0266  18DD    		DB	18H,btdig0-$-1
		
0268          	gotnum:	; Boot N... "N" in D
0268  D5      		push	d	; save unit num (E)
0269  4A      		mov	c,d
026A  06FF    		mvi	b,-1	; boot modules only
026C  21850B  		lxi	h,bfnum
026F  CD2A0C  		call	bfind	; might have already been loaded...
0272  D1      		pop	d
0273  DABE01  		jc	error
0276  CDE402  		call	vfport
0279  DA1C02  		jc	s501er
			; convert phy drv to phy base + unit
027C  7A      		mov	a,d
027D          		ldx	d,mdbase
027D  DD5602  		DB	0DDH,d*8+46H,mdbase
0280  92      		sub	d
0281  5F      		mov	e,a
0282  C34203  		jmp	goboot
		
0285          	cmdboot:
0285  21DB06  		lxi	h,bootms
0288  CDA309  		call	msgout	; complete (B)oot
028B  3EC3    		mvi	a,0c3h
028D  328022  		sta	bootbf	; mark "no string"
0290  AF      		xra	a
0291  325021  		sta	cport
0294  318022  		lxi	sp,bootbf
0297  0E0D    		mvi	c,CR	; end input on CR
0299          		jr	boot0
0299  1803    		DB	18H,boot0-$-1
029B          	bterr:
029B  CD0504  		call	belout
029E          	boot0:
029E  CDAC09  		call	conin
02A1  B9      		cmp	c
02A2  CAE30C  		jz	dfboot	; default boot, by phy drv...
02A5  1E00    		mvi	e,0
02A7  FE30    		cpi	'0'
02A9          		jrc	nodig
02A9  3804    		DB	38H,nodig-$-1
02AB  FE3A    		cpi	'9'+1
02AD          		jrc	btdig
02AD  3890    		DB	38H,btdig-$-1
02AF          	nodig:	; boot by letter... Boot alpha-
02AF  E65F    		ani	05fh ; toupper
02B1  FE5B    		cpi	'Z'+1
02B3          		jrnc	bterr
02B3  30E6    		DB	30H,bterr-$-1
02B5  FE41    		cpi	'A'
02B7          		jrc	bterr
02B7  38E2    		DB	38H,bterr-$-1
02B9  CD0704  		call	conout
02BC  CD0704  		call	conout
02BF  FE42    		cpi	'B'
02C1  DAB60C  		jc	A$boot	; 'A' is synonym for default
02C4  C5      	gotit1:	push	b
02C5  4F      		mov	c,a
02C6  06FF    		mvi	b,-1	; boot modules only
02C8  21690B  		lxi	h,bfchr
02CB  CD2A0C  		call	bfind
02CE  C1      		pop	b
02CF  DABE01  		jc	error
02D2  CDE402  		call	vfport
02D5  DA1C02  		jc	s501er
02D8          		ldx	d,mdbase	; base phy drv num
02D8  DD5602  		DB	0DDH,d*8+46H,mdbase
02DB          	gotit:
02DB  1E00    		mvi	e,0
02DD  3E2D    		mvi	a,'-'	; next is optional unit number...
02DF  CD0704  		call	conout
02E2          		jr	luboot0
02E2  1815    		DB	18H,luboot0-$-1
		
		; verify port is set
		; IX=boot module (in memory)
02E4          	vfport:	ldx	a,mdport
02E4  DD7E0C  		DB	0DDH,a*8+46H,mdport
02E7  B7      		ora	a
02E8          		jrnz	vfp0
02E8  2007    		DB	20H,vfp0-$-1
02EA  3A5021  		lda	cport	; if btinit did not set, we can't go on
02ED  B7      		ora	a
02EE  C0      		rnz
02EF  37      		stc
02F0  C9      		ret
02F1  325021  	vfp0:	sta	cport
02F4  AF      		xra	a
02F5  C9      		ret
		
02F6          	lunerr:
02F6  CD0504  		call	belout
02F9          	luboot0:
02F9  CDAC09  		call	conin
02FC  B9      		cmp	c
02FD          		jrz	goboot
02FD  2843    		DB	28H,goboot-$-1
02FF  FE3A    		cpi	':'
0301          		jrz	colon
0301  2827    		DB	28H,colon-$-1
0303  FE20    		cpi	' '
0305          		jrz	space
0305  281E    		DB	28H,space-$-1
0307  FE30    		cpi	'0'
0309          		jrc	lunerr
0309  38EB    		DB	38H,lunerr-$-1
030B  FE3A    		cpi	'9'+1
030D          		jrnc	lunerr
030D  30E7    		DB	30H,lunerr-$-1
030F  CD0704  		call	conout
0312  D630    		sui	'0'
0314  5F      		mov	e,a	; single digit (0..9)
0315          	luboot1:
0315  CDAC09  		call	conin
0318  B9      		cmp	c
0319          		jrz	goboot
0319  2827    		DB	28H,goboot-$-1
031B  FE3A    		cpi	':'	; Boot alpha-dig:str
031D          		jrz	colon
031D  280B    		DB	28H,colon-$-1
031F  FE20    		cpi	' '	; cosmetic spaces?
0321          		jrz	space
0321  2802    		DB	28H,space-$-1
0323  3E07    		mvi	a,BEL
0325          	space:
0325  CD0704  		call	conout
0328          		jr	luboot1
0328  18EB    		DB	18H,luboot1-$-1
		
032A          	colon:	; get arbitrary string as last boot param
032A  0600    		mvi	b,0
032C  218022  		lxi	h,bootbf
032F          	btstr0:
032F  CD0704  		call	conout	; first time, ':'
0332  CDAC09  		call	conin
0335  04      		inr	b
0336  23      		inx	h
0337  77      		mov	m,a
0338  B9      		cmp	c
0339          		jrnz	btstr0
0339  20F4    		DB	20H,btstr0-$-1
033B  3600    		mvi	m,0
033D  78      		mov	a,b
033E  3D      		dcr	a
033F  328022  		sta	bootbf	; bootbf: <len> <string...> as in CP/M cmd buf
		; D=Phys Drive base number, E=Unit number
		; (or, D=Phys Drive unit, E=0)
		; module must have already been loaded
		; NOTE: string might have been placed at bootbf...
0342          	goboot:
0342  218022  		lxi	h,bootbf
0345  7E      		mov	a,m
0346  FEC3    		cpi	0c3h
0348          		jrz	gboot0
0348  280C    		DB	28H,gboot0-$-1
034A  4F      		mov	c,a	; length
034B  0600    		mvi	b,0
034D  09      		dad	b
034E  23      		inx	h	; TRM...
034F          	btstr1:	; use stack as char array...
034F  7E      		mov	a,m
0350  F5      		push	psw
0351  33      		inx	sp	; undo half of push
0352  2B      		dcx	h
0353  0D      		dcr	c
0354          		jrnz	btstr1
0354  20F9    		DB	20H,btstr1-$-1
0356  CD9909  	gboot0:	call	crlf
0359  21BE01  		lxi	h,error
035C  E5      		push	h
		; IX=boot module (in memory)
		; D=phy drv base, E=unit
035D          	doboot:	; common boot path for console and keypad
035D  CD6209  		call	h17init
0360  7B      		mov	a,e
0361  323121  		sta	AIO$UNI	; relative unit num
0364  82      		add	d
0365  323420  		sta	l2034h	; boot phys drv unit num
0368  C3850C  		jmp	btboot
			; btboot effectively returns here on success
			; (in most cases)
036B  AF      	hwboot:	xra	a
036C  320820  		sta	MFlag
036F  21191C  	hxboot:	lxi	h,CLOCK
0372  222020  		shld	vrst1+1
0375  C38022  		jmp	bootbf
		
		; ROM start point - initialize everything
		; We know we have at least 64K RAM...
		; But, right now, ROM is in 0000-7FFF so must copy
		; core code and switch to RAM...
0378          	init:
		; TODO: before copying ROM into RAM, preserve RAM for dump
FFFF          	if z180
		; Might arrive here from a TRAP...
0378          		in0	a,itc
0378  ED3834  		DB	0EDH, a*8+00H, itc
037B          		bit	7,a
037B  CB7F    		DB	0CBH,7*8+a+40H
037D  C2390D  		jnz	trap
0380  21FFFF  	init0:	lxi	h,0ffffh
0383  F9      		sphl
0384  E5      		push	h	; save top on stack
			;call	savram
			; map in 8K of ROM from 0xf8000 into 0x4000
0385  3EC4    		mvi	a,1100$0100b	; ca at 0xc000, ba at 0x4000
0387          		out0	a,mmu$cbar
0387  ED393A  		DB	0EDH, a*8+01H, mmu$cbar
			; both CBR and BBR ar "0" - if got here via RESET
FFFF          	if use$dma
			; DMA F8000-FA000 into 00000-02000
038A  CD1A06  		call	dmarom
		else
		endif
		else
		endif
			; save config data
038D  210010  		lxi	h,suadr
0390  1100F8  		lxi	d,susave
0393  010F01  		lxi	b,sumax
0396          		ldir
0396  EDB0    		DB	0EDH,0B0H
0398  219900  		lxi	h,re$entry
039B  E5      		push	h
039C  CD8404  		call	coninit
039F  CD8506  		call	meminit
03A2  CF      		rst	1	; kick-start clock
03A3  21C60E  		lxi	h,signon
03A6  CDA309  		call	msgout
			; save registers on stack, for debugger access...
03A9  C36A00  		jmp	intsetup
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Substitute command
03AC          	cmdsub:
03AC  21E306  		lxi	h,subms
03AF  CDA309  		call	msgout
03B2  211420  		lxi	h,ABUSS
03B5  B7      		ora	a	; NC
03B6  160D    		mvi	d,CR
03B8  CD1204  		call	adrin
03BB  EB      		xchg
03BC          	cmdsub0:
03BC  CD6204  		call	adrnl
03BF  7E      		mov	a,m
03C0  CD7104  		call	hexout
03C3  CD6D04  		call	spout
03C6          	cmdsub1:
03C6  CD4F04  		call	hexin
03C9          		jrnc	cmdsub4
03C9  3019    		DB	30H,cmdsub4-$-1
03CB  FE0D    		cpi	CR
03CD          		jrz	cmdsub2
03CD  280C    		DB	28H,cmdsub2-$-1
03CF  FE2D    		cpi	'-'
03D1          		jrz	cmdsub3
03D1  280B    		DB	28H,cmdsub3-$-1
03D3  FE2E    		cpi	'.'
03D5  C8      		rz
03D6  CD0504  		call	belout
03D9          		jr	cmdsub1
03D9  18EB    		DB	18H,cmdsub1-$-1
03DB          	cmdsub2:
03DB  23      		inx	h
03DC          		jr	cmdsub0
03DC  18DE    		DB	18H,cmdsub0-$-1
03DE          	cmdsub3:
03DE  CD0704  		call	conout
03E1  2B      		dcx	h
03E2          		jr	cmdsub0
03E2  18D8    		DB	18H,cmdsub0-$-1
03E4          	cmdsub4:
03E4  3600    		mvi	m,000h
03E6          	cmdsub5:
03E6  CD0704  		call	conout
03E9  CD4604  		call	hexbin
03EC          		rld
03EC  ED6F    		DB	0EDH, 6FH
03EE  CDF503  		call	inhexcr
03F1          		jrnc	cmdsub2
03F1  30E8    		DB	30H,cmdsub2-$-1
03F3          		jr	cmdsub5
03F3  18F1    		DB	18H,cmdsub5-$-1
		
03F5          	inhexcr:
03F5  CDAC09  		call	conin
03F8  FE0D    		cpi	CR
03FA  C8      		rz
03FB  CD5204  		call	hexchk
03FE  3F      		cmc
03FF  D8      		rc
0400  CD0504  		call	belout
0403          		jr	inhexcr
0403  18F0    		DB	18H,inhexcr-$-1
		
0405          	belout:
0405  3E07    		mvi	a,BEL
0407          	conout:
0407  F5      		push	psw
0408          	conot1:
0408  DBED    		in	0edh
040A  E620    		ani	00100000b
040C          		jrz	conot1
040C  28FA    		DB	28H,conot1-$-1
040E  F1      		pop	psw
040F  D3E8    		out	0e8h
0411  C9      		ret
		
		; D=term char (e.g. '.' for Substitute)
		; HL=location to store address
		; CY=first digit in A
0412          	adrin:
0412  E5      		push	h	; adr to store value
0413  D4AC09  		cnc	conin
0416  BA      		cmp	d	; no input?
0417  CA4E06  		jz	adrin3
041A  210000  		lxi	h,0
041D  37      		stc
041E  D4AC09  	adrin0:	cnc	conin
0421  CD5204  		call	hexchk
0424          		jrc	adrin1
0424  380E    		DB	38H,adrin1-$-1
0426  CD0704  		call	conout
0429  CD4604  		call	hexbin
042C  29      		dad	h
042D  29      		dad	h
042E  29      		dad	h
042F  29      		dad	h
0430  B5      		ora	l
0431  6F      		mov	l,a
0432          		jr	adrin0
0432  18EA    		DB	18H,adrin0-$-1
0434          	adrin1:
0434  BA      		cmp	d
0435          		jrz	adrin2
0435  2806    		DB	28H,adrin2-$-1
0437  CD0504  		call	belout
043A  B7      		ora	a
043B          		jr	adrin0
043B  18E1    		DB	18H,adrin0-$-1
043D          	adrin2:
043D  CD0704  		call	conout
0440  EB      		xchg
0441  E1      		pop	h
0442  73      		mov	m,e
0443  23      		inx	h
0444  72      		mov	m,d
0445  C9      		ret
		
0446          	hexbin:
0446  D63A    		sui	'9'+1
0448          		jrnc	hexbi0
0448  3002    		DB	30H,hexbi0-$-1
044A  C607    		adi	7
044C          	hexbi0:
044C  C603    		adi	3
044E  C9      		ret
		
044F          	hexin:
044F  CDAC09  		call	conin
0452          	hexchk:
0452  FE30    		cpi	'0'
0454  D8      		rc
0455  FE3A    		cpi	'9'+1
0457  3F      		cmc
0458  D0      		rnc
0459  E65F    		ani	05fh	; toupper
045B  FE41    		cpi	'A'
045D  D8      		rc
045E  FE47    		cpi	'F'+1
0460  3F      		cmc
0461  C9      		ret
		
		; HL = adr to print
0462          	adrnl:
0462  CD9909  		call	crlf
0465          	adrout:
0465  7C      		mov	a,h
0466  CD7104  		call	hexout
0469  7D      		mov	a,l
046A  CD7104  		call	hexout
046D          	spout:
046D  3E20    		mvi	a,' '
046F          		jr	conout
046F  1896    		DB	18H,conout-$-1
		
0471          	hexout:
0471  F5      		push	psw
0472  07      		rlc
0473  07      		rlc
0474  07      		rlc
0475  07      		rlc
0476  CD7A04  		call	hexdig
0479  F1      		pop	psw
047A          	hexdig:
047A  E60F    		ani	00fh
047C  C690    		adi	090h
047E  27      		daa
047F  CE40    		aci	040h
0481  27      		daa
0482          		jr	conout
0482  1883    		DB	18H,conout-$-1
		
0484          	coninit:
0484  0E0C    		mvi	c,12	; 9600 baud
0486  DBF2    		in	0f2h
0488  E680    		ani	10000000b	; 9600/19.2K?
048A          		jrz	ci0
048A  2802    		DB	28H,ci0-$-1
048C  0E06    		mvi	c,6	; 19.2K baud
048E  3E83    	ci0:	mvi	a,083h
0490  D3EB    		out	0ebh
0492  AF      		xra	a
0493  D3E9    		out	0e9h
0495  79      		mov	a,c
0496  D3E8    		out	0e8h
0498  3E03    		mvi	a,003h
049A  D3EB    		out	0ebh
049C  AF      		xra	a
049D  D3E9    		out	0e9h
049F  3E0F    		mvi	a,00001111b	; OUT2=1 hides 16C2550 intr enable diff
04A1  D3EC    		out	0ech
04A3  C9      		ret
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Memory Test command
		
04A4          	cserr:
04A4  21BA06  		lxi	h,cserms
04A7  C3A309  		jmp	msgout
		
04AA          	cmdmt:
04AA  21FB06  		lxi	h,mtms
04AD  CDA309  		call	msgout
04B0  CD9209  		call	waitcr
04B3  21C706  		lxi	h,topms
04B6  CDA309  		call	msgout
04B9  210000  		lxi	h,0
04BC  39      		dad	sp
04BD  7C      		mov	a,h
04BE  3C      		inr	a
04BF          		jrz	cmdmt0
04BF  2802    		DB	28H,cmdmt0-$-1
04C1  D620    		sui	020h
04C3          	cmdmt0:
04C3  67      		mov	h,a
04C4  2E00    		mvi	l,0
04C6  2B      		dcx	h
04C7  D630    		sui	'0'
04C9  5F      		mov	e,a
04CA  CD6504  		call	adrout
04CD  CD9909  		call	crlf
04D0  1600    		mvi	d,000h
04D2  0E30    		mvi	c,030h
04D4  0600    		mvi	b,000h
04D6          		exx
04D6  D9      		DB	0D9H
04D7  210105  		lxi	h,mtest0
04DA  11FC2F  		lxi	d,memtest - (mtest1-mtest0)
04DD  01F000  		lxi	b,mtestZ-mtest0
04E0          		ldir
04E0  EDB0    		DB	0EDH,0B0H
04E2  110030  		lxi	d,memtest
04E5  210505  		lxi	h,mtest1
04E8  0EEC    		mvi	c,mtestZ-mtest1
04EA  AF      		xra	a
04EB          		exaf
04EB  08      		DB	08H
04EC  AF      		xra	a
04ED          	cmdmt1:
04ED  86      		add	m
04EE          		exaf
04EE  08      		DB	08H
04EF  EB      		xchg
04F0  86      		add	m
04F1          		exaf
04F1  08      		DB	08H
04F2  EB      		xchg
04F3  23      		inx	h
04F4  13      		inx	d
04F5  0D      		dcr	c
04F6          		jrnz	cmdmt1
04F6  20F5    		DB	20H,cmdmt1-$-1
04F8  4F      		mov	c,a
04F9          		exaf
04F9  08      		DB	08H
04FA  B9      		cmp	c
04FB          		jrnz	cserr
04FB  20A7    		DB	20H,cserr-$-1
04FD  F3      		di
04FE  C3FC2F  		jmp	memtest - (mtest1-mtest)
		
		;------------------------------------------------
		; Start of relocated code...
		; Memory Test routine, position-independent
		;
0501          	mtest0:
0501          	mtest:
0501  3E20    		mvi	a,ctl$ORG0	; ORG0 on (ROM off)
0503  D3F2    		out	0f2h
0505          	mtest1:		; lands at 03000h - retained relocated code
0505          		exx
0505  D9      		DB	0D9H
0506  62      		mov	h,d
0507  2E00    		mvi	l,0
0509  78      		mov	a,b
050A          		exx
050A  D9      		DB	0D9H
050B  4F      		mov	c,a
050C  0602    		mvi	b,2
050E          	mtest2:
050E  79      		mov	a,c
050F  07      		rlc
0510  07      		rlc
0511  07      		rlc
0512  07      		rlc
0513  4F      		mov	c,a
0514  E60F    		ani	00fh
0516  C690    		adi	090h
0518  27      		daa
0519  CE40    		aci	040h
051B  27      		daa
051C  D3E8    		out	0e8h
051E          	mtest3:
051E  DBED    		in	0edh
0520  E620    		ani	020h
0522          		jrz	mtest3
0522  28FA    		DB	28H,mtest3-$-1
0524  05      		dcr	b
0525          		jrnz	mtest2
0525  20E7    		DB	20H,mtest2-$-1
0527  3E0D    		mvi	a,CR
0529  D3E8    		out	0e8h
052B          		exx
052B  D9      		DB	0D9H
052C  78      		mov	a,b
052D          	mtest4:
052D  77      		mov	m,a
052E  C601    		adi	1
0530  27      		daa
0531  2C      		inr	l
0532          		jrnz	mtest4
0532  20F9    		DB	20H,mtest4-$-1
0534  24      		inr	h
0535  0D      		dcr	c
0536          		jrnz	mtest4
0536  20F5    		DB	20H,mtest4-$-1
0538  7C      		mov	a,h
0539  92      		sub	d
053A  4F      		mov	c,a
053B  62      		mov	h,d
053C  2E00    		mvi	l,0
053E  78      		mov	a,b
053F          	mtest5:
053F  BE      		cmp	m
0540          		jrnz	mtest9
0540  2046    		DB	20H,mtest9-$-1
0542  C601    		adi	1
0544  27      		daa
0545  2C      		inr	l
0546          		jrnz	mtest5
0546  20F7    		DB	20H,mtest5-$-1
0548  24      		inr	h
0549  0D      		dcr	c
054A          		jrnz	mtest5
054A  20F3    		DB	20H,mtest5-$-1
054C          		exx
054C  D9      		DB	0D9H
054D  210030  		lxi	h,memtest
0550  110000  		lxi	d,0
0553  01EC00  		lxi	b,mtestZ-mtest1
0556          		exx
0556  D9      		DB	0D9H
0557  7A      		mov	a,d
0558  EE30    		xri	030h
055A  57      		mov	d,a
055B          		jrz	mtest6
055B  2803    		DB	28H,mtest6-$-1
055D  4B      		mov	c,e
055E          		jr	mtest7
055E  180A    		DB	18H,mtest7-$-1
0560          	mtest6:
0560  0E30    		mvi	c,030h
0562  3E01    		mvi	a,001h
0564  80      		add	b
0565  27      		daa
0566  47      		mov	b,a
0567          		exx
0567  D9      		DB	0D9H
0568  EB      		xchg
0569          		exx
0569  D9      		DB	0D9H
056A          	mtest7:
056A          		exx
056A  D9      		DB	0D9H
056B          		ldir
056B  EDB0    		DB	0EDH,0B0H
056D  7A      		mov	a,d
056E  E6F0    		ani	0f0h
0570  67      		mov	h,a
0571  2E00    		mvi	l,0
0573  0EEC    		mvi	c,mtestZ-mtest1
0575  AF      		xra	a
0576          	mtest8:
0576  86      		add	m
0577  23      		inx	h
0578  0D      		dcr	c
0579          		jrnz	mtest8
0579  20FB    		DB	20H,mtest8-$-1
057B  4F      		mov	c,a
057C          		exaf
057C  08      		DB	08H
057D  B9      		cmp	c
057E          		jrnz	mtestE
057E  2049    		DB	20H,mtestE-$-1
0580          		exaf
0580  08      		DB	08H
0581  7A      		mov	a,d
0582  E6F0    		ani	0f0h
0584  67      		mov	h,a
0585  2E00    		mvi	l,0
0587  E9      		pchl
0588          	mtest9:
0588  AE      		xra	m
0589  57      		mov	d,a
058A  3E0A    		mvi	a,LF
058C  D3E8    		out	0e8h
058E          	mtestA:
058E  DBED    		in	0edh
0590  E620    		ani	020h
0592          		jrz	mtestA
0592  28FA    		DB	28H,mtestA-$-1
0594  0E02    		mvi	c,2
0596  0604    		mvi	b,4
0598          	mtestB:
0598  7C      		mov	a,h
0599  07      		rlc
059A  07      		rlc
059B  07      		rlc
059C  07      		rlc
059D  E60F    		ani	00fh
059F  C690    		adi	090h
05A1  27      		daa
05A2  CE40    		aci	040h
05A4  27      		daa
05A5  D3E8    		out	0e8h
05A7          	mtestC:
05A7  DBED    		in	0edh
05A9  E620    		ani	020h
05AB          		jrz	mtestC
05AB  28FA    		DB	28H,mtestC-$-1
05AD  29      		dad	h
05AE  29      		dad	h
05AF  29      		dad	h
05B0  29      		dad	h
05B1          		djnz	mtestB
05B1  10E5    		DB	10H,mtestB-$-1
05B3  3E20    		mvi	a,' '
05B5  D3E8    		out	0e8h
05B7          	mtestD:
05B7  DBED    		in	0edh
05B9  E620    		ani	020h
05BB          		jrz	mtestD
05BB  28FA    		DB	28H,mtestD-$-1
05BD  0D      		dcr	c
05BE  EB      		xchg
05BF  0602    		mvi	b,002h
05C1          		jrnz	mtestB
05C1  20D5    		DB	20H,mtestB-$-1
05C3  3E2A    		mvi	a,'*'
05C5  D3E8    		out	0e8h
05C7          		jr	mtestG
05C7  1814    		DB	18H,mtestG-$-1
05C9          	mtestE:
05C9  DBED    		in	0edh
05CB  E620    		ani	020h
05CD          		jrz	mtestE
05CD  28FA    		DB	28H,mtestE-$-1
05CF  3E0A    		mvi	a,LF
05D1  D3E8    		out	0e8h
05D3          	mtestF:
05D3  DBED    		in	0edh
05D5  E620    		ani	020h
05D7          		jrz	mtestF
05D7  28FA    		DB	28H,mtestF-$-1
05D9  3E21    		mvi	a,'!'
05DB  D3E8    		out	0e8h
05DD          	mtestG:
05DD  DBED    		in	0edh
05DF  E620    		ani	020h
05E1          		jrz	mtestG
05E1  28FA    		DB	28H,mtestG-$-1
05E3  AF      		xra	a
05E4  06FA    		mvi	b,0fah
05E6          	mtestH:
05E6  3D      		dcr	a
05E7          		jrnz	mtestH
05E7  20FD    		DB	20H,mtestH-$-1
05E9          		djnz	mtestH
05E9  10FB    		DB	10H,mtestH-$-1
05EB  3E07    		mvi	a,BEL
05ED  D3E8    		out	0e8h
05EF          		jr	mtestG
05EF  18EC    		DB	18H,mtestG-$-1
		; End of relocated code
05F1          	mtestZ	equ	$
		;------------------------------------------------
		
		; Special entry points expected by HDOS, or maybe Heath CP/M boot.
			rept	0613h-$
05F1  FF      		db	0ffh
05F2  FF      		db	0ffh
05F3  FF      		db	0ffh
05F4  FF      		db	0ffh
05F5  FF      		db	0ffh
05F6  FF      		db	0ffh
05F7  FF      		db	0ffh
05F8  FF      		db	0ffh
05F9  FF      		db	0ffh
05FA  FF      		db	0ffh
05FB  FF      		db	0ffh
05FC  FF      		db	0ffh
05FD  FF      		db	0ffh
05FE  FF      		db	0ffh
05FF  FF      		db	0ffh
0600  FF      		db	0ffh
0601  FF      		db	0ffh
0602  FF      		db	0ffh
0603  FF      		db	0ffh
0604  FF      		db	0ffh
0605  FF      		db	0ffh
0606  FF      		db	0ffh
0607  FF      		db	0ffh
0608  FF      		db	0ffh
0609  FF      		db	0ffh
060A  FF      		db	0ffh
060B  FF      		db	0ffh
060C  FF      		db	0ffh
060D  FF      		db	0ffh
060E  FF      		db	0ffh
060F  FF      		db	0ffh
0610  FF      		db	0ffh
0611  FF      		db	0ffh
0612  FF      		db	0ffh
0000          	if	($ <> 0613h)
		endif
0613  C30000  		jmp	0	; initialized by H47 boot module
0616  00      		db	0
0617  C30000  		jmp	0	; initialized by H47 boot module
		
FFFF          	if z180
FFFF          	if use$dma
		; DMA F8000-FA000 into 00000-02000
		; copy core ROM (8K) into 0000 using DMAC
061A          	dmarom:
061A  21800F  		lxi	h,0f80h	; page addr (256B)
061D  110000  		lxi	d,0000h	; page addr (256B)
0620  010020  		lxi	b,2000h	; bytes
		; Generic memcpy using DMAC.
		; HL=src, DE=dst, all units 256B "pages".
		; BC=count, units are bytes
0623          	dmacpy:
0623  AF      		xra	a
0624          		out0	a,dar0l	; (256B page boundary)
0624  ED3923  		DB	0EDH, a*8+01H, dar0l
0627          		out0	e,dar0h ;
0627  ED1924  		DB	0EDH, e*8+01H, dar0h
062A          		out0	d,dar0b	; dest addr
062A  ED1125  		DB	0EDH, d*8+01H, dar0b
062D          		out0	a,sar0l	; (256B page boundary)
062D  ED3920  		DB	0EDH, a*8+01H, sar0l
0630          		out0	l,sar0h ;
0630  ED2921  		DB	0EDH, l*8+01H, sar0h
0633          		out0	h,sar0b	; source addr
0633  ED2122  		DB	0EDH, h*8+01H, sar0b
0636          		out0	c,bcr0l	;
0636  ED0926  		DB	0EDH, c*8+01H, bcr0l
0639          		out0	b,bcr0h	; byte count
0639  ED0127  		DB	0EDH, b*8+01H, bcr0h
063C  3E02    		mvi	a,00000010b	; mem2mem, burst mode
063E          		out0	a,dmode
063E  ED3931  		DB	0EDH, a*8+01H, dmode
0641  3E60    		mvi	a,01100000b	; DE0,/DWE0(!/DWE1) - start ch 0
0643          		out0	a,dstat
0643  ED3930  		DB	0EDH, a*8+01H, dstat
0646  0E30    		mvi	c,dstat
0648          	init1:	tstio	01000000b	; wait for DMAC to idle
0648  ED7440  		DB	0EDH, 74H, 01000000b
064B          		jrnz	init1
064B  20FB    		DB	20H,init1-$-1
064D  C9      		ret
		endif
		endif
		
064E  E1      	adrin3:	pop	h
064F  5E      		mov	e,m
0650  23      		inx	h
0651  56      		mov	d,m
0652  C9      		ret
		
0653          	kpgo:
0653  3ED0    		mvi	a,11010000b	; MON off
0655  320920  		sta	ctl$F0
0658  E1      		pop	h	; discard ret adr
0659  C34700  		jmp	intret	; execute
		
065C  2A1420  	kpin:	lhld	ABUSS
065F  4C      		mov	c,h	; port
0660          		inp	l	; get value
0660  ED68    		DB	0EDH,l*8+40H
0662  221420  		shld	ABUSS
0665  C9      		ret
		
0666  2A1420  	kpout:	lhld	ABUSS
0669  4C      		mov	c,h	; port
066A          		outp	l	; output value
066A  ED69    		DB	0EDH,l*8+41H
066C  C9      	kpabt:	ret
		
066D          	kprw:	; switch between display/modify
066D  3A0720  		lda	DspMod
0670  EE01    		xri	1
0672  320720  		sta	DspMod
0675  C9      		ret
		
0676          	kpsst:	; single-step one instruction
0676  F3      		di
0677  3A0920  		lda	ctl$F0
067A  EE10    		xri	00010000b	; disable SS inhibit
067C  D3F0    		out	0f0h
067E  320920  	sst1:	sta	ctl$F0
0681  E1      		pop	h	; discard ret adr
0682  C34700  		jmp	intret	; execute
		
		; initialize monitor memory at 2000h
0685          	meminit:
0685  AF      		xra	a
0686  325321  		sta	l2153h
0689  323B20  		sta	lstcmd
068C  320520  		sta	RegI
068F  320620  		sta	DsProt
0692  323920  		sta	Radix
0695  323A20  		sta	kpchar
0698  3C      		inr	a	; 1
0699  320A20  		sta	Refind
069C  3E20    		mvi	a,ctl$ORG0	; ORG0 on, 2mS off...
069E  323620  		sta	ctl$F2	; 2mS off, ORG0 on
06A1  D3F2    		out	0f2h	; enable RAM now...
06A3  3EC9    		mvi	a,0c9h	; RET
06A5  320420  		sta	PrsRAM
06A8  210050  		lxi	h,05000h	; 0, (beep, 2mS, !MON, !SI)
06AB  220820  		shld	MFlag	; MFlag, CtlFlg
06AE  21FFFF  		lxi	h,0ffffh	; top of memory
06B1  221420  		shld	ABUSS
06B4  3E01    		mvi	a,debounce
06B6  321720  		sta	kpcnt
06B9  C9      		ret
		
		; for cmdmt...
06BA  07436B73	cserms:	db	BEL,'Cksum error',TRM
      756D2065
      72726F72
      00
06C7  546F7020	topms:	db	'Top of Mem: ',TRM
      6F66204D
      656D3A20
      00
		
06D4  0D0A4838	prompt:	db	CR,LF,'H8: ',TRM
      3A2000
06DB  6F6F7420	bootms:	db	'oot ',TRM
      00
06E0  6F2000  	goms:	db	'o ',TRM
06E3  75627374	subms:	db	'ubstitute ',TRM
      69747574
      652000
06EE  726F6720	pcms:	db	'rog Counter ',TRM
      436F756E
      74657220
      00
06FB  656D2074	mtms:	db	'em test',TRM
      65737400
0703  756D7020	dmpms:	db	'ump ',TRM
      00
		
		; command not built-in, check modules.
		; should only be called for console commands.
		; A=cmd key/chr (also in 'lstcmd')
0708          	nocmd:
0708  4F      		mov	c,a
0709  0600    		mvi	b,0	; no boot modules
070B  21690B  		lxi	h,bfchr
070E  CD2A0C  		call	bfind
0711          		jrc	cmerr
0711  3809    		DB	38H,cmerr-$-1
0713  3A3B20  		lda	lstcmd
0716  CD0704  		call	conout
0719  C3850C  		jmp	cmexec
		
071C  CD0504  	cmerr:	call	belout
071F  C3BD00  		jmp	prloop
		
		; get "alternate" (secondary) boot device...
0722          	galtbt:
0722  110000  		lxi	d,0
0725  DBF2    		in	0f2h
0727  E670    		ani	01110000b	; default boot selection
0729  FE20    		cpi	00100000b	; if default at 07CH,
072B  CAF001  		jz	gtdev2		; get 078H device...
		; if device was not 07CH, then use 07CH... ???
		;;	cpi	00110000b	; if device at 078H
		;;	jz	gtdev1		; get 07CH device...
072E  C3DC01  		jmp	gtdev1		; get 07CH device...
		
0731          	kpubt:
0731  3A0820  		lda	MFlag
0734  F602    		ori	00000010b	; disable disp updates
0736  320820  		sta	MFlag
0739  CD240B  		call	clrdisp	; clean slate
073C  01DD0A  		lxi	b,dDev
073F  110B20  		lxi	d,ALeds
0742  CD1A0B  		call	mov3dsp
0745  CDC409  		call	keyin	; get device
0748  E67F    		ani	01111111b
074A  FE0C    		cpi	0ch	; cancel
074C  CAA907  		jz	kperr
074F  325121  		sta	BDF
0752  4F      		mov	c,a
0753  06FF    		mvi	b,-1	; boot modules only
0755  21770B  		lxi	h,bfkey
0758  CD2A0C  		call	bfind
075B          		jrc	deverr
075B  384C    		DB	38H,deverr-$-1
075D  DD      		db	0ddh !
075E  44      	 mov b,h	; mov b,IXh ; module address
075F  0E0D    		mvi	c,mddisp
0761  110B20  		lxi	d,ALeds
0764  CD1A0B  		call	mov3dsp
0767  D5      		push	d	; save LEDs pointer
			; determine if fixed port...
0768          		ldx	a,mdport
0768  DD7E0C  		DB	0DDH,a*8+46H,mdport
076B  B7      		ora	a
076C          		jrnz	gotprt
076C  2018    		DB	20H,gotprt-$-1
076E  01E00A  		lxi	b,dPor
0771  CD1A0B  		call	mov3dsp
0774  CDC409  		call	keyin	; get port
0777  E67F    		ani	01111111b
0779  FE04    		cpi	04h	; 0..3 allowed
077B  D2A907  		jnc	deverr
077E  5F      		mov	e,a
077F  1600    		mvi	d,0
0781  21EB07  		lxi	h,ports
0784  19      		dad	d
0785  7E      		mov	a,m
0786  E1      	gotprt:	pop	h	; LEDs pointer
0787  325021  		sta	cport
078A  CD510A  		call	dod	; decode number to HL
078D  54      		mov	d,h
078E  5D      		mov	e,l
078F  01E30A  		lxi	b,dUni
0792  CD1A0B  		call	mov3dsp
0795  CDC409  		call	keyin	; get unit
0798  E67F    		ani	01111111b
079A  5F      		mov	e,a
079B          		ldx	d,mdbase
079B  DD5602  		DB	0DDH,d*8+46H,mdbase
079E  3EC3    		mvi	a,0c3h
07A0  328022  		sta	bootbf	; mark "no string"
07A3  318022  		lxi	sp,bootbf
07A6  CD5D03  		call	doboot	; only returns if error...
07A9          	kperr:
07A9          	deverr:	; TODO: implement
07A9  FB      		ei	; TODO: more required before this?
07AA  210820  		lxi	h,MFlag
07AD  7E      		mov	a,m
07AE  E6FE    		ani	11111110b	; disable "private" clock intr
07B0  77      		mov	m,a
07B1  01E60A  		lxi	b,dErr
07B4  110B20  		lxi	d,ALeds
07B7  2E06    		mvi	l,6
07B9  CD1C0B  		call	movLdsp
07BC  0E80    		mvi	c,10000000b	; beep on/off bit
07BE  211B20  		lxi	h,ticcnt
07C1  110920  		lxi	d,ctl$F0
07C4          	bterr0:
07C4  1A      		ldax	d
07C5  A9      		xra	c	; beep on
07C6  12      		stax	d
07C7  7E      		mov	a,m
07C8  C619    		adi	25	; 50mS
07CA          	bterr2:
07CA  BE      		cmp	m
07CB          		jrnz	bterr2
07CB  20FD    		DB	20H,bterr2-$-1
07CD  1A      		ldax	d
07CE  A9      		xra	c	; beep off
07CF  12      		stax	d
07D0  7E      		mov	a,m
07D1  C6FF    		adi	-1
07D3  BE      	bterr1:	cmp	m
07D4          		jrz	bterr0
07D4  28EE    		DB	28H,bterr0-$-1
07D6  3A3A20  		lda	kpchar
07D9  FE6F    		cpi	01101111b	; raw pattern for '*' or CANCEL
07DB          		jrnz	bterr1
07DB  20F6    		DB	20H,bterr1-$-1
07DD  AF      		xra	a
07DE  323A20  		sta	kpchar
07E1  210820  		lxi	h,MFlag
07E4  7E      		mov	a,m
07E5  E6BD    		ani	10111101b	; normal mode...
07E7  77      		mov	m,a
			; should return to 'start' but avoid extra prompts...
07E8  C39900  		jmp	re$entry
		
		; port options for keys 0-3
07EB  787CB8BC	ports:	db	078h,07ch,0b8h,0bch
		
07EF          	kppbt:	; primary boot (default boot)
07EF  CDF801  		call	gtdfbt
07F2  01EF0A  		lxi	b,dPri
07F5          	kpbt0:
07F5  AF      		xra	a
07F6  325021  		sta	cport
07F9  D5      		push	d	; phy drv, unit
07FA  C5      		push	b
07FB  4A      		mov	c,d
07FC  06FF    		mvi	b,-1	; boot modules only
07FE  21850B  		lxi	h,bfnum
0801  CD2A0C  		call	bfind	; might have already been loaded...
0804  DAA907  		jc	kperr
0807  CDE402  		call	vfport
080A  DAA907  		jc	kperr	; TODO: specific error? SW1 Error?
080D  3A0820  		lda	MFlag
0810  F602    		ori	00000010b	; disable disp updates
0812  320820  		sta	MFlag
0815  CD240B  		call	clrdisp
0818  C1      		pop	b
0819  110B20  		lxi	d,ALeds
081C  CD1A0B  		call	mov3dsp
			; TODO: fix this
081F  3EFA    		mvi	a,250	;;
0821  CD3002  		call	delay	;;
0824  D1      		pop	d	; phy drv, unit
0825  318022  		lxi	sp,bootbf
0828  21A907  		lxi	h,kperr
082B  E5      		push	h
082C  C35D03  		jmp	doboot
		
082F          	kpsbt:	; secondary boot (TODO: what does this mean now?)
082F  CD2207  		call	galtbt
0832  01F20A  		lxi	b,dSec
0835          		jr	kpbt0
0835  18BE    		DB	18H,kpbt0-$-1
		
0837          	kptap:	; cassette load (read) or store (write, save)
0837  0600    		mvi	b,0	; command only
0839  0E88    		mvi	c,88h	; cassette module key
083B  21770B  		lxi	h,bfkey
083E  CD2A0C  		call	bfind
0841  DAA907  		jc	kperr
0844  CD850C  		call	cmexec
0847  C9      		ret
		
0848          	kprdx:	; choose radix for display
0848  3A0820  		lda	MFlag
084B  F602    		ori	00000010b	; disable disp updates
084D  320820  		sta	MFlag
0850  CD240B  		call	clrdisp
0853  01EC0A  		lxi	b,dRad
0856  110B20  		lxi	d,ALeds
0859  CD1A0B  		call	mov3dsp
085C  3A3920  		lda	Radix
085F  B7      		ora	a
0860  2F      		cma		; 00->ff
0861          		jrz	rdx0
0861  2801    		DB	28H,rdx0-$-1
0863  AF      		xra	a	; else 00
0864  323920  	rdx0:	sta	Radix		; 00       ff
0867  E613    		ani	00010011b	; 00->00,  ff->13
0869  EE81    		xri	10000001b	; 00->81,  ff->92
086B  321020  		sta	ALeds+5		; 00->'O', ff->'H'
			; wait 1S to allow user to see...
086E  3EFA    		mvi	a,250		; 500mS
0870  CD3002  		call	delay
0873  3EFA    		mvi	a,250		; 500mS
0875  CD3002  		call	delay
0878  3A0820  		lda	MFlag
087B  E6FD    		ani	11111101b	; enable disp updates
087D  320820  		sta	MFlag
			; TODO: beep?
0880  C9      		ret
		
0881          	kpnxt:	; next register/memory addr
0881  3A0720  		lda	DspMod
0884  E602    		ani	00000010b	; Z if memory mode
0886  2A1420  		lhld	ABUSS
0889  110520  		lxi	d,RegI
088C  23      		inx	h
088D          		jrz	sae
088D  2821    		DB	28H,sae-$-1
088F  1A      		ldax	d
0890  C602    		adi	2
0892  12      		stax	d
0893  FE1A    		cpi	nReg
0895  D8      		rc
0896  AF      		xra	a
0897  12      		stax	d
0898  C9      		ret
		
0899          	kpprv:	; previous register/memory addr
0899  3A0720  		lda	DspMod
089C  E602    		ani	00000010b	; Z if memory mode
089E  2A1420  		lhld	ABUSS
08A1  110520  		lxi	d,RegI
08A4  2B      		dcx	h
08A5          		jrz	sae
08A5  2809    		DB	28H,sae-$-1
08A7  1A      		ldax	d
08A8  D602    		sui	2
08AA  12      		stax	d
08AB  D0      		rnc
08AC  3E18    		mvi	a,nReg-2
08AE  12      		stax	d
08AF  C9      		ret
		
08B0  221420  	sae:	shld	ABUSS
08B3  C9      		ret
		
08B4          	kpmem:	; switch to memory mode - enter address
08B4  AF      		xra	a	; also NC
08B5  320720  		sta	DspMod	; display memory...
08B8  320620  		sta	DsProt	; periods all on...
08BB  211520  		lxi	h,ABUSS+1	; little-endian, enter hi byte first
08BE  CD1E09  		call	iob
08C1  2B      		dcx	h	; HL=low byte of address
08C2  0600    		mvi	b,0
08C4  B7      		ora	a	; CY=0
08C5  CD1E09  		call	iob
08C8  C9      		ret		; back to start... TODO: prevent re-prompt
		
08C9          	kprgm:	; switch to register mode
08C9  3E02    		mvi	a,2
08CB  320720  		sta	DspMod	; display registers...
08CE  AF      		xra	a
08CF  320620  		sta	DsProt	; periods all on...
08D2  CDC409  		call	keyin
08D5  E67F    		ani	01111111b
08D7  FE0C    		cpi	(nReg-1)/2	; PC requires spcl
08D9          		jrc	reg0
08D9  3807    		DB	38H,reg0-$-1
08DB  D603    		sub	3		; gap in codes?
08DD  FE0C    		cpi	12		; was 15...
08DF  C2A907  		jnz	kperr	; TODO: proper handling
08E2  07      	reg0:	rlc	; times 2
08E3  320520  		sta	RegI
08E6  C9      		ret		; back to start... TODO: prevent re-prompt
		
08E7          	kpcmd:	; A=keypad command, +80h
			; keypad pressed...
08E7  FE8A    		cpi	8ah	; non-digit (hex req first be '0')
08E9  D2C800  		jnc	cmchr
08EC  47      		mov	b,a
08ED  3A0720  		lda	DspMod
08F0  0F      		rrc	; CY=alter mode
08F1          		jrc	kpalter	; alter mode - numeric values only
08F1  3804    		DB	38H,kpalter-$-1
08F3  78      		mov	a,b
08F4  C3C800  		jmp	cmchr
		; A=DspMod >> 1, B=key
08F7          	kpalter:
08F7  2A1420  		lhld	ABUSS
08FA  0F      		rrc	; register (else memory)
08FB          		jrc	kpreg
08FB  3809    		DB	38H,kpreg-$-1
08FD  37      		stc
08FE  CD1E09  		call	iob
0901  23      		inx	h
0902  221420  		shld	ABUSS
0905  C9      		ret
		
		; B=key
0906          	kpreg:
0906  3A0520  		lda	RegI
0909  B7      		ora	a
090A  CAA907  		jz	kperr	; RegI == 0 (SP) not allowed
090D  5F      		mov	e,a
090E  1600    		mvi	d,0
0910  2A1D20  		lhld	RegPtr
0913  19      		dad	d
0914  23      		inx	h	; HL=high byte of address
0915  37      		stc
0916  CD1E09  		call	iob
0919  2B      		dcx	h	; HL=low byte of address
091A  CD1E09  		call	iob
091D  C9      		ret
		
		; Input Octal(or Hex) byte
		; B=key, CY=first digit
091E          	iob:	rarr	c	; save CY => C bit 7
091E  CB19    		DB	0CBH, 18H + c
0920  3A3920  		lda	Radix
0923  B7      		ora	a
0924  78      		mov	a,b
0925          		jrz	ioboct
0925  2820    		DB	28H,ioboct-$-1
		; iobhex - to avoid conflict with cmd keys A-F, first input must be [0]
		; So, hex input requires 3 or 5 + 1 keys.
0927          		ralr	c	; restore CY
0927  CB11    		DB	0CBH, 10H+c
0929  D4C409  		cnc	keyin
092C  E67F    		ani	01111111b
092E  C2A907  		jnz	kperr
0931  1602    		mvi	d,2
0933  CDC409  	iobh0:	call	keyin
0936  E67F    		ani	01111111b
0938  5F      		mov	e,a
0939  7E      		mov	a,m
093A  07      		rlc
093B  07      		rlc
093C  07      		rlc
093D  07      		rlc
093E  E6F0    		ani	11110000b
0940  B3      		ora	e	; also ensure NC for loop
0941  77      		mov	m,a
0942  15      		dcr	d
0943          		jrnz	iobh0
0943  20EE    		DB	20H,iobh0-$-1
0945          		jr	iob0
0945  181A    		DB	18H,iob0-$-1
0947          	ioboct:
0947          		ralr	c	; restore CY
0947  CB11    		DB	0CBH, 10H+c
0949  1603    		mvi	d,3
094B  D4C409  	iobo0:	cnc	keyin
094E  E67F    		ani	01111111b
0950  FE08    		cpi	8
0952  D2A907  		jnc	kperr
0955  5F      		mov	e,a
0956  7E      		mov	a,m
0957  07      		rlc
0958  07      		rlc
0959  07      		rlc
095A  E6F8    		ani	11111000b
095C  B3      		ora	e	; also ensure NC for loop
095D  77      		mov	m,a
095E  15      		dcr	d
095F          		jrnz	iobo0
095F  20EA    		DB	20H,iobo0-$-1
0961          	iob0:
			; TODO: blip to ack entry?
0961  C9      		ret
		
		; returns with interrupts disabled
0962          	h17init:
0962  F3      		di
0963  AF      		xra	a
0964  D37F    		out	07fh
0966  D5      		push	d
0967  210920  		lxi	h,ctl$F0
096A  36D0    		mvi	m,0d0h	; !beep, 2mS, !mon, !SI
096C  215A1F  		lxi	h,R$CONST
096F  114820  		lxi	d,D$CONST
0972  015800  		lxi	b,88
0975          		ldir
0975  EDB0    		DB	0EDH,0B0H
0977  6B      		mov	l,e
0978  62      		mov	h,d
0979  13      		inx	d
097A  0E1E    		mvi	c,30
097C  77      		mov	m,a
097D          		ldir	; fill l20a0h...
097D  EDB0    		DB	0EDH,0B0H
097F  3C      		inr	a	; A=1
0980  211F20  		lxi	h,intvec	; vector area
0983          	h17ini0:
0983  36C3    		mvi	m,0c3h
0985  23      		inx	h
0986  365C    		mvi	m,LOW (nulint-rst0)
0988  23      		inx	h
0989  3600    		mvi	m,HIGH (nulint-rst0)
098B  23      		inx	h
098C  87      		add	a	; shift left, count 7
098D  F28309  		jp	h17ini0
0990  D1      		pop	d
0991  C9      		ret
		
0992          	waitcr:
0992  CDAC09  		call	conin
0995  FE0D    		cpi	CR
0997          		jrnz	waitcr
0997  20F9    		DB	20H,waitcr-$-1
0999          	crlf:
0999  3E0D    		mvi	a,CR
099B  CD0704  		call	conout
099E  3E0A    		mvi	a,LF
09A0  C30704  		jmp	conout
		
09A3          	msgout:
09A3  7E      		mov	a,m
09A4  B7      		ora	a
09A5  C8      		rz
09A6  CD0704  		call	conout
09A9  23      		inx	h
09AA          		jr	msgout
09AA  18F7    		DB	18H,msgout-$-1
		
		; called in the context of a command on console
09AC  DBED    	conin:	in	0edh
09AE  0F      		rrc
09AF          		jrc	conin0
09AF  3809    		DB	38H,conin0-$-1
09B1  3A3A20  		lda	kpchar
09B4  B7      		ora	a
09B5          		jrz	conin
09B5  28F5    		DB	28H,conin-$-1
			; cancel console cmd, leave keypad char for cmdin
09B7  C3A500  		jmp	start
		
09BA  DBE8    	conin0:	in	0e8h
09BC  E67F    		ani	07fh
09BE  FE7F    		cpi	DEL	; DEL key restarts from anywhere?
09C0  CA9900  		jz	re$entry
09C3  C9      		ret
		
		; called in the context of command on front-panel
09C4  3A3A20  	keyin:	lda	kpchar
09C7  B7      		ora	a
09C8          		jrnz	getkey
09C8  2013    		DB	20H,getkey-$-1
09CA  DBED    		in	0edh
09CC  0F      		rrc
09CD          		jrnc	keyin
09CD  30F5    		DB	30H,keyin-$-1
			; cancel kaypad cmd, leave console char for cmdin
			; TODO: what modes need reset?
09CF  C3A500  		jmp	start
		
		; wait for command - console or keypad
09D2          	cmdin:
09D2  DBED    		in	0edh
09D4  0F      		rrc
09D5          		jrc	conin0
09D5  38E3    		DB	38H,conin0-$-1
09D7  3A3A20  		lda	kpchar
09DA  B7      		ora	a
09DB          		jrz	cmdin
09DB  28F5    		DB	28H,cmdin-$-1
09DD  F5      	getkey:	push	psw	; A=scan code
09DE  AF      		xra	a
09DF  323A20  		sta	kpchar
09E2  F1      		pop	psw
09E3  EEFE    		xri	11111110b
09E5  0F      		rrc
09E6          		jrnc	gotkey
09E6  3004    		DB	30H,gotkey-$-1
09E8  0F      		rrc
09E9  0F      		rrc
09EA  0F      		rrc
09EB  0F      		rrc
09EC  E60F    	gotkey:	ani	00001111b
09EE  F680    		ori	10000000b	; distinguish from console input
			; TODO: check for CANCEL key?
09F0  C9      		ret
		
		; keypad check at 32mS
09F1  211620  	kpchk:	lxi	h,RckA
09F4  DBF0    		in	0f0h
09F6  BE      		cmp	m	; RckA
09F7          		jrnz	kpchk0
09F7  200F    		DB	20H,kpchk0-$-1
09F9  E611    		ani	00010001b
09FB  FE11    		cpi	00010001b
09FD  C8      		rz	; nothing pressed
09FE  7E      		mov	a,m
			; need to count auto-repeat/debounce
09FF  23      		inx	h	; kpcnt
0A00  35      		dcr	m
0A01  C0      		rnz
			; got a key press...
0A02  323A20  		sta	kpchar
0A05  3610    		mvi	m,rptcnt
0A07  C9      		ret
0A08  77      	kpchk0:	mov	m,a	; RckA
0A09  23      		inx	h	; kpcnt
0A0A  3601    		mvi	m,debounce
0A0C  C9      		ret
		
		; Update Front-panel Display
0A0D  3E02    	ufd:	mvi	a,00000010b
0A0F  A0      		ana	b
0A10  C0      		rnz		; updates disabled
0A11  210620  		lxi	h,DsProt
0A14          		rlcr	m
0A14  CB06    		DB	0CBH, 00H + m
0A16  46      		mov	b,m
0A17  23      		inx	h	; DspMod
0A18  7E      		mov	a,m
0A19  E602    		ani	00000010b
0A1B  2A1420  		lhld	ABUSS
0A1E          		jrz	ufd1	; displaying memory
0A1E  2812    		DB	28H,ufd1-$-1
			; displaying registers
0A20  CD0F0B  		call	lra	; locate register address offset (DE)
0A23  E5      		push	h
0A24  21F50A  		lxi	h,LedRegTbl
0A27  19      		dad	d
0A28  7E      		mov	a,m
0A29  23      		inx	h
0A2A  66      		mov	h,m
0A2B  6F      		mov	l,a
0A2C  E3      		xthl
0A2D  B4      		ora	h
0A2E  7E      		mov	a,m
0A2F  23      		inx	h
0A30  66      		mov	h,m
0A31  6F      		mov	l,a
0A32  F5      	ufd1:	push	psw
0A33  EB      		xchg
0A34  210B20  		lxi	h,ALeds
0A37  7A      		mov	a,d
0A38  CD510A  		call	dod
0A3B  7B      		mov	a,e
0A3C  CD510A  		call	dod
0A3F  F1      		pop	psw
0A40  1A      		ldax	d
0A41          		jrz	dod	; if displaying memory
0A41  280E    		DB	28H,dod-$-1
			; displaying register name
0A43  C1      		pop	b
0A44  111120  		lxi	d,DLeds
0A47  2E03    	mv3byt:	mvi	l,3
0A49  0A      	mvb:	ldax	b
0A4A  12      		stax	d
0A4B  03      		inx	b
0A4C  13      		inx	d
0A4D  2D      		dcr	l
0A4E          		jrnz	mvb
0A4E  20F9    		DB	20H,mvb-$-1
0A50  C9      		ret
		
		; B=dot flag
0A51  4F      	dod:	mov	c,a	; value to display
0A52  3A3920  		lda	Radix
0A55  B7      		ora	a	; Z if octal (also CY=0)
0A56  79      		mov	a,c
0A57          		jrnz	dodhex
0A57  2021    		DB	20H,dodhex-$-1
0A59  D5      		push	d
0A5A  0E03    		mvi	c,3
0A5C  17      	dodr5:	ral
0A5D  17      		ral
0A5E  17      		ral
0A5F  F5      		push	psw
0A60  E607    		ani	07h
0A62  C6A6    		adi	LOW doddig
0A64  5F      		mov	e,a
0A65  3E0A    		mvi	a,HIGH doddig
0A67  CE00    		aci	0
0A69  57      		mov	d,a
0A6A  1A      		ldax	d
0A6B  A8      		xra	b	; DP on/off
0A6C  E67F    		and	01111111b	; why???
0A6E  A8      		xra	b
0A6F  77      		mov	m,a
0A70  23      		inx	h
0A71  78      		mov	a,b	; rlcr b
0A72  07      		rlc
0A73  47      		mov	b,a
0A74  F1      		pop	psw
0A75  0D      		dcr	c
0A76          		jrnz	dodr5
0A76  20E4    		DB	20H,dodr5-$-1
0A78  D1      		pop	d
0A79  C9      		ret
		
0A7A  D5      	dodhex:	push	d
0A7B  0E02    		mvi	c,2
0A7D  07      	deh55:	rlc
0A7E  07      		rlc
0A7F  07      		rlc
0A80  07      		rlc
0A81  F5      		push	psw
0A82  E60F    		ani	0fh
0A84  C6A6    		adi	LOW doddig
0A86  5F      		mov	e,a
0A87  3E0A    		mvi	a,HIGH doddig
0A89  CE00    		aci	0
0A8B  57      		mov	d,a
0A8C  1A      		ldax	d
0A8D  A8      		xra	b		; DP on/off
0A8E  E67F    		ani	01111111b	; why???
0A90  A8      		xra	b		; ???
0A91  77      		mov	m,a
0A92  23      		inx	h
0A93          		rlcr	b
0A93  CB00    		DB	0CBH, 00H + b
0A95  F1      		pop	psw
0A96  0D      		dcr	c
0A97          		jrnz	deh55
0A97  20E4    		DB	20H,deh55-$-1
0A99  D1      		pop	d
0A9A  3E6F    		mvi	a,01101111b	; "_"
0A9C  A8      		xra	b		; DP on/off
0A9D  E67F    		ani	01111111b	; why???
0A9F  A8      		xra	b		; ???
0AA0  77      		mov	m,a
0AA1  23      		inx	h
0AA2  78      		mov	a,b	; rlcr b
0AA3  07      		rlc
0AA4  47      		mov	b,a
0AA5  C9      		ret
		
		; octal (base 8) 7-seg translation
0AA6  01      	doddig:	db	00000001b	; "0."
0AA7  73      		db	01110011b	; "1."
0AA8  48      		db	01001000b	; "2."
0AA9  60      		db	01100000b	; "3."
0AAA  32      		db	00110010b	; "4."
0AAB  24      		db	00100100b	; "5."
0AAC  04      		db	00000100b	; "6."
0AAD  71      		db	01110001b	; "7."
0AAE  00      		db	00000000b	; "8."
0AAF  20      		db	00100000b	; "9."
0AB0  10      		db	00010000b	; "A."
0AB1  06      		db	00000110b	; "b."
0AB2  0D      		db	00001101b	; "C."
0AB3  42      		db	01000010b	; "d."
0AB4  0C      		db	00001100b	; "E."
0AB5  1C      		db	00011100b	; "F."
		
0AB6  FFA498  	dSP:	db	11111111b,10100100b,10011000b	; " SP"
0AB9  FF909C  	dPSW:	db	11111111b,10010000b,10011100b	; " AF"
0ABC  FF868D  	dBC:	db	11111111b,10000110b,10001101b	; " BC"
0ABF  FFC28C  	dDE:	db	11111111b,11000010b,10001100b	; " DE"
0AC2  FF928F  	dHL:	db	11111111b,10010010b,10001111b	; " HL"
0AC5  FFF3B6  	dIX:	db	11111111b,11110011b,10110110b	; " IX"
0AC8  FFF3DE  	dIY:	db	11111111b,11110011b,11011110b	; " IY"
0ACB  FFF3D3  	dIR:	db	11111111b,11110011b,11010011b	; " IR"
0ACE  909CBF  	dPSWp:	db	10010000b,10011100b,10111111b	; "AF'"
0AD1  868DBF  	dBCp:	db	10000110b,10001101b,10111111b	; "BC'"
0AD4  C28CBF  	dDEp:	db	11000010b,10001100b,10111111b	; "DE'"
0AD7  928FBF  	dHLp:	db	10010010b,10001111b,10111111b	; "HL'"
0ADA  FF98CE  	dPC:	db	11111111b,10011000b,11001110b	; " PC"
		
0ADD  C28C83  	dDev:	db	11000010b,10001100b,10000011b	; "dEU" (dev)
0AE0  98C6DE  	dPor:	db	10011000b,11000110b,11011110b	; "Por"
0AE3  83D6F7  	dUni:	db	10000011b,11010110b,11110111b	; "Uni"
0AE6  8CDEDE  	dErr:	db	10001100b,11011110b,11011110b	; "Error "
0AE9  C6DEFF  		db	11000110b,11011110b,11111111b
0AEC  DE90C2  	dRad:	db	11011110b,10010000b,11000010b	; "rAd"
0AEF  98DEDF  	dPri:	db	10011000b,11011110b,11011111b	; "Pri"
0AF2  A48C8D  	dSec:	db	10100100b,10001100b,10001101b	; "SEC"
		
0AF5          	LedRegTbl:
0AF5  B60A    		dw	dSP	; 0
0AF7  B90A    		dw	dPSW	; 1
0AF9  BC0A    		dw	dBC	; 2
0AFB  BF0A    		dw	dDE	; 3
0AFD  C20A    		dw	dHL	; 4
0AFF  C50A    		dw	dIX	; 5	- TODO
0B01  C80A    		dw	dIY	; 6	- TODO
0B03  CB0A    		dw	dIR	; 7	- TODO
0B05  CE0A    		dw	dPSWp	; 8	- TODO
0B07  D10A    		dw	dBCp	; 9	- TODO
0B09  D40A    		dw	dDEp	; 10	- TODO
0B0B  D70A    		dw	dHLp	; 11	- TODO
0B0D  DA0A    		dw	dPC	; 12	- 5
001A          	nReg	equ	$-LedRegTbl	; 2x num registers...
		
0B0F  3A0520  	lra:	lda	RegI
0B12  5F      	lrax:	mov	e,a
0B13  1600    		mvi	d,0
0B15  2A1D20  		lhld	RegPtr
0B18  19      		dad	d
0B19  C9      		ret
		
0B1A          	mov3dsp:
0B1A  2E03    		mvi	l,3
0B1C          	movLdsp:
0B1C  0A      	md0:	ldax	b
0B1D  12      		stax	d
0B1E  03      		inx	b
0B1F  13      		inx	d
0B20  2D      		dcr	l
0B21          		jrnz	md0
0B21  20F9    		DB	20H,md0-$-1
0B23  C9      		ret
		
0B24          	clrdisp:
0B24  210B20  		lxi	h,fpLeds
0B27  5D      		mov	e,l
0B28  54      		mov	d,h
0B29  010800  		lxi	b,9-1
0B2C  36FF    		mvi	m,11111111b
0B2E  13      		inx	d
0B2F          		ldir
0B2F  EDB0    		DB	0EDH,0B0H
0B31  C9      		ret
		
		; Front panel display refresh and keypad check
0B32          	int1$fp:
0B32  210820  		lxi	h,MFlag
0B35  7E      		mov	a,m
0B36  47      		mov	b,a
0B37  E640    		ani	01000000b	; refresh display?
0B39  23      		inx	h	; ctl$F0
0B3A  7E      		mov	a,m
0B3B  0E00    		mvi	c,0
0B3D          		jrnz	fp3
0B3D  200B    		DB	20H,fp3-$-1
0B3F  23      		inx	h	; Refind
0B40  35      		dcr	m
0B41          		jrnz	fp2
0B41  2002    		DB	20H,fp2-$-1
0B43  3609    		mvi	m,9
0B45  5E      	fp2:	mov	e,m	; 1-9
0B46  1600    		mvi	d,0
0B48  19      		dad	d	; fpLeds[E-1]
0B49  4B      		mov	c,e
0B4A  B1      	fp3:	ora	c
0B4B  D3F0    		out	0f0h
0B4D  7E      		mov	a,m
0B4E  D3F1    		out	0f1h
			; See if time to update display values or check keypad
0B50  2E1B    		mvi	l,LOW ticcnt
0B52  7E      		mov	a,m
0B53  F5      		push	psw
0B54  E61F    		ani	31	; 64mS
0B56  CC0D0A  		cz	ufd
0B59  F1      		pop	psw
0B5A  E60F    		ani	15	; 32mS
0B5C  CCF109  		cz	kpchk
			; not really FP related, but no space in low ROM...
0B5F  3A0820  		lda	MFlag
0B62  0F      		rrc		; private int1?
0B63  DC1F20  		cc	vrst1
0B66  C34700  		jmp	intret
		
		; match module by character (letter)
		; C=letter, B=00:cmd,ff:boot
0B69          	bfchr:	ldx	a,+2	; phy drv or type
0B69  DD7E02  		DB	0DDH,a*8+46H,+2
0B6C  D6C8    		sui	200	; boot modules < 200
0B6E  9F      		sbb	a	; ff=boot, 00=cmd
0B6F  B8      		cmp	b	; ZR=match
0B70          		jrnz	bfn0
0B70  2025    		DB	20H,bfn0-$-1
0B72          		ldx	a,mdchr
0B72  DD7E0A  		DB	0DDH,a*8+46H,mdchr
0B75  B9      		cmp	c
0B76  C9      		ret
		
		; match module by FP key
		; C=FP key, B=00:cmd,ff:boot
0B77          	bfkey:	ldx	a,+2	; phy drv or type
0B77  DD7E02  		DB	0DDH,a*8+46H,+2
0B7A  D6C8    		sui	200	; boot modules < 200
0B7C  9F      		sbb	a	; ff=boot, 00=cmd
0B7D  B8      		cmp	b	; ZR=match
0B7E          		jrnz	bfn0
0B7E  2017    		DB	20H,bfn0-$-1
0B80          		ldx	a,mdkey
0B80  DD7E0B  		DB	0DDH,a*8+46H,mdkey
0B83  B9      		cmp	c
0B84  C9      		ret
		
		; match boot module by phy drv number
		; C=phy drv, B=type
		; Only for boot modules
0B85          	bfnum:	ldx	a,mdbase	; phy drv or type
0B85  DD7E02  		DB	0DDH,a*8+46H,mdbase
0B88  FEC8    		cpi	200	; boot modules < 200
0B8A          		jrnc	bfn0	; skip if >= 200
0B8A  300B    		DB	30H,bfn0-$-1
0B8C  79      		mov	a,c
0B8D          		subx	mdbase
0B8D  DD9602  		DB	0DDH,96H,mdbase
0B90          		cmpx	mdluns
0B90  DDBE03  		DB	0DDH,0BEH,mdluns
0B93          		jrnc	bfn0 ; might be Z...
0B93  3002    		DB	30H,bfn0-$-1
0B95  AF      		xra	a
0B96  C9      		ret
0B97  AF      	bfn0:	xra	a
0B98  3C      		inr	a
0B99  C9      		ret
		
		; List only boot modules
		; On first module, C=0
0B9A          	bflst:	ldx	a,mdbase	; phy drv or type
0B9A  DD7E02  		DB	0DDH,a*8+46H,mdbase
0B9D  FEC8    		cpi	200	; boot modules < 200
0B9F          		jrnc	bfn0
0B9F  30F6    		DB	30H,bfn0-$-1
0BA1  79      		mov	a,c
0BA2  B7      		ora	a
0BA3  3E2C    		mvi	a,','
0BA5  C40704  		cnz	conout
0BA8  0C      		inr	c
0BA9  78      		mov	a,b
0BAA          		subx	mdbase
0BAA  DD9602  		DB	0DDH,96H,mdbase
0BAD          		cmpx	mdluns
0BAD  DDBE03  		DB	0DDH,0BEH,mdluns
0BB0  3E2A    		mvi	a,'*'
0BB2  DC0704  		cc	conout
0BB5          		pushix
0BB5  DDE5    		DB	0DDH,0E5H
0BB7  E1      		pop	h
0BB8  111000  		lxi	d,mdname
0BBB  19      		dad	d
0BBC  CDA309  		call	msgout
0BBF  219A0B  		lxi	h,bflst
0BC2          		jr	bfn0	; NZ - keep going
0BC2  18D3    		DB	18H,bfn0-$-1
		
		; List only boot modules
0BC4          	bfllst:	ldx	a,mdbase	; phy drv or type
0BC4  DD7E02  		DB	0DDH,a*8+46H,mdbase
0BC7  FEC8    		cpi	200	; boot modules < 200
0BC9          		jrnc	bfn0
0BC9  30CC    		DB	30H,bfn0-$-1
0BCB  78      		mov	a,b
0BCC          		subx	mdbase
0BCC  DD9602  		DB	0DDH,96H,mdbase
0BCF          		cmpx	mdluns
0BCF  DDBE03  		DB	0DDH,0BEH,mdluns
0BD2  3E20    		mvi	a,' '
0BD4          		jrnc	bfll2
0BD4  3002    		DB	30H,bfll2-$-1
0BD6  3E2A    		mvi	a,'*'
0BD8  CD0704  	bfll2:	call	conout
0BDB          		pushix
0BDB  DDE5    		DB	0DDH,0E5H
0BDD  E1      		pop	h
0BDE  111000  		lxi	d,mdname
0BE1  19      		dad	d
0BE2  CDA309  		call	msgout
0BE5  3E09    		mvi	a,TAB
0BE7  CD0704  		call	conout
0BEA          		ldx	a,mdchr
0BEA  DD7E0A  		DB	0DDH,a*8+46H,mdchr
0BED  CD0704  		call	conout
0BF0  3E20    		mvi	a,' '
0BF2  CD0704  		call	conout
0BF5          		ldx	a,mdkey
0BF5  DD7E0B  		DB	0DDH,a*8+46H,mdkey
0BF8  C630    		adi	'0'
0BFA          		jrnc	bfll0
0BFA  3002    		DB	30H,bfll0-$-1
0BFC  3E2D    		mvi	a,'-'
0BFE  CD0704  	bfll0:	call	conout
0C01  3E20    		mvi	a,' '
0C03  CD0704  		call	conout
0C06          		ldx	a,mdbase
0C06  DD7E02  		DB	0DDH,a*8+46H,mdbase
0C09  CD8B0C  		call	decout
0C0C          		ldx	a,mdluns
0C0C  DD7E03  		DB	0DDH,a*8+46H,mdluns
0C0F  3D      		dcr	a
0C10          		jrz	bfll1
0C10  280F    		DB	28H,bfll1-$-1
0C12  3E2D    		mvi	a,'-'
0C14  CD0704  		call	conout
0C17          		ldx	a,mdbase
0C17  DD7E02  		DB	0DDH,a*8+46H,mdbase
0C1A          		addx	mdluns
0C1A  DD8603  		DB	0DDH,86H,mdluns
0C1D  3D      		dcr	a
0C1E  CD8B0C  		call	decout
0C21  CD9909  	bfll1:	call	crlf
0C24  21C40B  		lxi	h,bfllst
0C27  AF      		xra	a	; NZ - keep going
0C28  3C      		inr	a
0C29  C9      		ret
		
		; Find boot module and load into 1000h if necessary.
		; HL=match function: returns Z if found, BC=target, IX=module
		; Return CY at end of modules (not found)
		; Return IX=loaded module (run location)
		; Must preserve BC during search loop.
0C2A          	bfind:
			; can't check if it's loaded until we know where it's loaded...
			; first, check if already loaded
			;lxix	btovl
			;call	icall
			;rz
0C2A          	bfind0:
FFFF          	if z180
			; map ROM F8000 into 4000
0C2A  3EF4    		mvi	a,0f8h-04h
0C2C          		out0	a,mmu$bbr
0C2C  ED3939  		DB	0EDH, a*8+01H, mmu$bbr
		else
		endif
0C2F          		lxix	btmods	; start of modules...
0C2F  DD21    		DB	0DDH,21H
0C31  0060    		DW	btmods
0C33  CD4201  	bf0:	call	icall
0C36          		jrz	bf9
0C36  281E    		DB	28H,bf9-$-1
0C38          		ldx	d,mdpgs
0C38  DD5600  		DB	0DDH,d*8+46H,mdpgs
0C3B  1E00    		mvi	e,0
0C3D          		dadx	d
0C3D  DD19    		DB	0DDH,d*8+09H
0C3F          		pushix
0C3F  DDE5    		DB	0DDH,0E5H
0C41  F1      		pop	psw	; A=IXh
0C42  FEC0    		cpi	HIGH bterom	; end of ROM
0C44          		jrnc	bf1
0C44  300A    		DB	30H,bf1-$-1
0C46          		ldx	a,mdpgs
0C46  DD7E00  		DB	0DDH,a*8+46H,mdpgs
0C49  B7      		ora	a
0C4A          		jrz	bf1
0C4A  2804    		DB	28H,bf1-$-1
0C4C  FEFF    		cpi	0ffh
0C4E          		jrnz	bf0
0C4E  20E3    		DB	20H,bf0-$-1
0C50          	bf1:
FFFF          	if z180
0C50  AF      		xra	a
0C51          		out0	a,mmu$bbr
0C51  ED3939  		DB	0EDH, a*8+01H, mmu$bbr
		else
		endif
0C54  37      		stc	; CY = end of list (not found)
0C55  C9      		ret
		
0C56          	bf9:	; match found, now load into place and init
0C56          		ldx	b,mdpgs
0C56  DD4600  		DB	0DDH,b*8+46H,mdpgs
0C59          		ldx	d,mdorg
0C59  DD5601  		DB	0DDH,d*8+46H,mdorg
0C5C          		pushix		;
0C5C  DDE5    		DB	0DDH,0E5H
0C5E  E1      		pop	h	; HL=IX (module in logical addr)
0C5F  1E00    		mvi	e,0
0C61  0E00    		mvi	c,0
0C63  D5      		push	d
FFFF          	if z180
FFFF          	if use$dma
0C64  7C      		mov	a,h	; L should (must) be 00... also E...
0C65  D640    		sui	40h	; remove offset of mapping @ 4000h
0C67  C680    		adi	80h	; low byte of 0f80h ROM page addr
0C69  6F      		mov	l,a
0C6A  3E0F    		mvi	a,0fh	; hi byte of 0f80h ROM page addr
0C6C  CE00    		aci	0
0C6E  67      		mov	h,a	; HL=ROM phy addr
0C6F  5A      		mov	e,d	; shift dest addr into page addr
0C70  1600    		mvi	d,0	; always in low memory?
0C72  CD2306  		call	dmacpy
		else
		endif
		else
		endif
0C75          		popix	; module load addr
0C75  DDE1    		DB	0DDH,0E1H
			; now call init routine... but must restore RAM...
FFFF          	if z180
0C77  AF      		xra	a
0C78          		out0	a,mmu$bbr
0C78  ED3939  		DB	0EDH, a*8+01H, mmu$bbr
		else
		endif
0C7B  CD7F0C  		call	btinit	; CY indicates error, pass along...
0C7E  C9      		ret
		
		; IX=module in real memory
0C7F          	btinit:	pushix
0C7F  DDE5    		DB	0DDH,0E5H
0C81  E1      		pop	h
0C82  2E04    		mvi	l,mdinit
0C84  E9      		pchl
		
		; IX=module in real memory
0C85          	cmexec:
0C85          	btboot:	pushix
0C85  DDE5    		DB	0DDH,0E5H
0C87  E1      		pop	h
0C88  2E07    		mvi	l,mdboot
0C8A  E9      		pchl
		
		; assume < 100
0C8B          	decout:
0C8B  1630    		mvi	d,'0'
0C8D          	decot0:
0C8D  D60A    		sui	10
0C8F  DA960C  		jc	decot1
0C92  14      		inr	d
0C93  C38D0C  		jmp	decot0
0C96          	decot1:
0C96  C60A    		adi	10
0C98  C630    		adi	'0'
0C9A  F5      		push	psw
0C9B  7A      		mov	a,d
0C9C  CD0704  		call	conout
0C9F  F1      		pop	psw
0CA0  C30704  		jmp	conout
		
		; Returns NZ if found, D=phy drv
0CA3          	gtdvtb:
0CA3  DBF2    		in	0f2h
0CA5  E670    		ani	01110000b	; default boot device
0CA7  07      		rlc
0CA8  07      		rlc
0CA9  07      		rlc
0CAA  07      		rlc
0CAB  21310D  		lxi	h,defbt
0CAE          	gtdvtb0:
0CAE  85      		add	l
0CAF  6F      		mov	l,a
0CB0  3E00    		mvi	a,0
0CB2  8C      		adc	h
0CB3  67      		mov	h,a
0CB4  56      		mov	d,m	; might be FF or FE
0CB5  C9      		ret
		
0CB6          	A$boot:
0CB6  CDF801  		call	gtdfbt	; DE=phy drv/unit
0CB9  7A      		mov	a,d
0CBA  FEFF    		cpi	0ffh
0CBC  CA1C02  		jz	s501er
0CBF  FEFE    		cpi	0feh
0CC1          		jrnz	findit
0CC1  200D    		DB	20H,findit-$-1
0CC3  2104F8  		lxi	h,susave+dpdev
0CC6  7E      		mov	a,m
0CC7  23      		inx	h
0CC8  FEFF    		cpi	0ffh
0CCA  CA1C02  		jz	s501er	; not setup
0CCD  C3C402  		jmp	gotit1
0CD0          	findit:
0CD0  D5      		push	d
0CD1  C5      		push	b
0CD2  4A      		mov	c,d
0CD3  06FF    		mvi	b,-1	; boot modules only
0CD5  21850B  		lxi	h,bfnum
0CD8  CD2A0C  		call	bfind
0CDB  C1      		pop	b
0CDC  D1      		pop	d
0CDD  DA1C02  		jc	s501er
0CE0  C3DB02  		jmp	gotit
		
		; default boot selected...
0CE3          	dfboot:
0CE3  CDF801  		call	gtdfbt	; DE=phy drv/unit
0CE6  7A      		mov	a,d
0CE7  FEFF    		cpi	0ffh
0CE9  CABE01  		jz	error
0CEC  FEFE    		cpi	0feh
0CEE  C26802  		jnz	gotnum
0CF1  2104F8  		lxi	h,susave+dpdev
0CF4          	dfboot0:	; HL=setup data for pri or sec
0CF4  7E      		mov	a,m
0CF5  23      		inx	h
0CF6  FEFF    		cpi	0ffh
0CF8  CABE01  		jz	error	; not setup
0CFB  E5      		push	h
0CFC  4F      		mov	c,a
0CFD  06FF    		mvi	b,-1	; boot modules only
0CFF  21690B  		lxi	h,bfchr
0D02  CD2A0C  		call	bfind
0D05  E1      		pop	h
0D06  DABE01  		jc	error	; no module
0D09          		ldx	d,mdbase
0D09  DD5602  		DB	0DDH,d*8+46H,mdbase
0D0C  7E      		mov	a,m
0D0D  23      		inx	h
0D0E  FEFF    		cpi	0ffh
0D10          		jrnz	dfbt0
0D10  2001    		DB	20H,dfbt0-$-1
0D12  AF      		xra	a
0D13  5F      	dfbt0:	mov	e,a	; DE=phy drv base,unit
0D14  7E      		mov	a,m
0D15  FEFF    		cpi	0ffh	; no string?
0D17  CA4203  		jz	goboot
0D1A  D5      		push	d
0D1B  118122  		lxi	d,bootbf+1	; len in +0...
0D1E  0E00    		mvi	c,0
0D20  7E      	dfbt1:	mov	a,m
0D21  12      		stax	d
0D22  23      		inx	h
0D23  13      		inx	d
0D24  0C      		inr	c
0D25  B7      		ora	a
0D26          		jrnz	dfbt1
0D26  20F8    		DB	20H,dfbt1-$-1
0D28  79      		mov	a,c
0D29  3D      		dcr	a
0D2A  328022  		sta	bootbf
0D2D  D1      		pop	d
0D2E  C34203  		jmp	goboot
		
0D31          	defbt:	; default boot table... port F2 bits 01110000b
0D31  21      		db	33	; -000---- MMS 5" floppy 0
0D32  1D      		db	29	; -001---- MMS 8" floppy 0
0D33  FF      		db	0ffh	; -010---- n/a  (port 7CH)
0D34  FF      		db	0ffh	; -011---- n/a  (port 78H)
0D35  29      		db	41	; -100---- VDIP1
0D36  46      		db	70	; -101---- GIDE disk part 0
0D37  3C      		db	60	; -110---- Network
0D38  FE      		db	0feh	; -111---- use setup primary
		
FFFF          	if z180
		; TODO: preserve CPU regs for debug/front-panel
0D39          	trap:
0D39  E1      		pop	h
0D3A  2B      		dcx	h
0D3B          		bit	6,a
0D3B  CB77    		DB	0CBH,6*8+a+40H
0D3D          		jrz	trap0
0D3D  2801    		DB	28H,trap0-$-1
0D3F  2B      		dcx	h
0D40          	trap0:
0D40  47      		mov	b,a
0D41  3EFF    		mvi	a,1111$1111b
0D43          		out0	a,mmu$cbar
0D43  ED393A  		DB	0EDH, a*8+01H, mmu$cbar
0D46  AF      		xra	a
0D47          		out0	a,mmu$cbr
0D47  ED3938  		DB	0EDH, a*8+01H, mmu$cbr
0D4A          		out0	a,mmu$bbr
0D4A  ED3939  		DB	0EDH, a*8+01H, mmu$bbr
0D4D  31FFFF  		lxi	sp,0ffffh
0D50  E5      		push	h
0D51  78      		mov	a,b
0D52  E67F    		ani	01111111b	; reset TRAP
0D54          		out0	a,itc
0D54  ED3934  		DB	0EDH, a*8+01H, itc
0D57  21670D  		lxi	h,trpms
0D5A  CDA309  		call	msgout
0D5D  E1      		pop	h
0D5E  CD6504  		call	adrout
0D61  CD9909  		call	crlf
0D64  C38003  		jmp	init0
		
0D67  0D0A2A2A	trpms:	db	CR,LF,'*** TRAP ',TRM
      2A205452
      41502000
		endif
		
0D73          	savram:	; TODO: implement this
0D73  C9      		ret
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Dump command
0D74          	cmddmp:
0D74  210307  		lxi	h,dmpms
0D77  CDA309  		call	msgout
0D7A  211420  		lxi	h,ABUSS
0D7D  B7      		ora	a	; NC
0D7E  160D    		mvi	d,CR
0D80  CD1204  		call	adrin
0D83  EB      		xchg	; HL=adr
0D84  0608    		mvi	b,8	; 8 lines (one half page, 128 bytes)
0D86  C5      	dmp0:	push	b
0D87  CD6204  		call	adrnl	; CR,LF,"AAAA " (HL=AAAA)
0D8A  E5      		push	h
0D8B  0610    		mvi	b,16
0D8D  7E      	dmp1:	mov	a,m
0D8E  CD7104  		call	hexout
0D91  CD6D04  		call	spout
0D94  23      		inx	h
0D95          		djnz	dmp1
0D95  10F6    		DB	10H,dmp1-$-1
0D97  E1      		pop	h
0D98  0610    		mvi	b,16
0D9A  7E      	dmp2:	mov	a,m
0D9B  FE20    		cpi	' '
0D9D          		jrc	dmp3
0D9D  3804    		DB	38H,dmp3-$-1
0D9F  FE7F    		cpi	'~'+1
0DA1          		jrc	dmp4
0DA1  3802    		DB	38H,dmp4-$-1
0DA3  3E2E    	dmp3:	mvi	a,'.'
0DA5  CD0704  	dmp4:	call	conout
0DA8  23      		inx	h
0DA9          		djnz	dmp2
0DA9  10EF    		DB	10H,dmp2-$-1
0DAB  C1      		pop	b
0DAC          		djnz	dmp0
0DAC  10D8    		DB	10H,dmp0-$-1
0DAE  221420  		shld	ABUSS
0DB1  C9      		ret
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; List available boot modules
0DB2  21C50D  	cmdlb:	lxi	h,lbmsg
0DB5  CDA309  		call	msgout
0DB8  CDF801  		call	gtdfbt
0DBB  42      		mov	b,d
0DBC  219A0B  		lxi	h,bflst
0DBF  0E00    		mvi	c,0
0DC1  CD2A0C  		call	bfind0
0DC4  C9      		ret
		
0DC5  69737420	lbmsg:	db	'ist boot modules',CR,LF,0
      626F6F74
      206D6F64
      756C6573
      0D0A00
0DD8  656C7020	hbmsg:	db	'elp boot',CR,LF,0
      626F6F74
      0D0A00
0DE3  5072693A	hbmsg2:	db	'Pri: ',0
      2000
0DE9  5365633A	hbmsg3:	db	'Sec: ',0
      2000
		
		; Help boot command
0DEF  21D80D  	cmdhb:	lxi	h,hbmsg
0DF2  CDA309  		call	msgout
0DF5  CDF801  		call	gtdfbt
0DF8  42      		mov	b,d
0DF9  21C40B  		lxi	h,bfllst
0DFC  CD2A0C  		call	bfind0
			; Now display primary/secondary configs
0DFF  21E30D  		lxi	h,hbmsg2
0E02  1104F8  		lxi	d,susave+dpdev
0E05  DBF2    		in	0f2h
0E07  E670    		ani	01110000b	; default boot device
0E09  FE70    		cpi	01110000b	; use setup cfg?
0E0B  3E2A    		mvi	a,'*'
0E0D          		jrz	cmdhb6
0E0D  2802    		DB	28H,cmdhb6-$-1
0E0F  3E20    		mvi	a,' '
0E11  CD200E  	cmdhb6:	call	cmdhbx
0E14  21E90D  		lxi	h,hbmsg3
0E17  1186F8  		lxi	d,susave+dsdev
0E1A  3E20    		mvi	a,' '	; never the default
0E1C  CD200E  		call	cmdhbx
0E1F  C9      		ret
		
0E20  CD0704  	cmdhbx:	call	conout
0E23  CDA309  		call	msgout
0E26  1A      		ldax	d
0E27  13      		inx	d
0E28  FEFF    		cpi	0ffh
0E2A          		jrnz	cmdhb0
0E2A  2002    		DB	20H,cmdhb0-$-1
0E2C  3E2D    		mvi	a,'-'
0E2E  CD0704  	cmdhb0:	call	conout
0E31  3E20    		mvi	a,' '
0E33  CD0704  		call	conout
0E36  1A      		ldax	d
0E37  13      		inx	d
0E38  C630    		adi	'0'	; FF=2F,CY
0E3A          		jrnc	cmdhb1
0E3A  3002    		DB	30H,cmdhb1-$-1
0E3C  3E2D    		mvi	a,'-'
0E3E  CD0704  	cmdhb1:	call	conout
0E41  3E20    		mvi	a,' '
0E43  CD0704  		call	conout
0E46  1A      		ldax	d
0E47  FEFF    		cpi	0ffh
0E49          		jrnz	cmdhb2
0E49  2007    		DB	20H,cmdhb2-$-1
0E4B  3E2D    		mvi	a,'-'
0E4D  CD0704  		call	conout
0E50          		jr	cmdhb3
0E50  1804    		DB	18H,cmdhb3-$-1
0E52  EB      	cmdhb2:	xchg
0E53  CDA309  		call	msgout
0E56  CD9909  	cmdhb3:	call	crlf
0E59  C9      		ret
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Add new boot module
0E5A  C9      	cmdab:	ret
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Update ROM
0E5B  C9      	cmdur:	ret
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Terminal mode - shuttle I/O between H19 and serial port
		; since both ports operate at the same speed, don't need
		; to check ready as often.
0E5C          	termod:
0E5C  21A40E  		lxi	h,terms
0E5F  CDA309  		call	msgout
0E62  CD9209  		call	waitcr
0E65          	termfl:
0E65  DBED    		in	0edh
0E67  E660    		ani	01100000b
0E69  FE60    		cpi	01100000b
0E6B          		jrnz	termfl	; wait for output to flush
0E6B  20F8    		DB	20H,termfl-$-1
0E6D  DBEB    		in	0ebh
0E6F  F680    		ori	10000000b
0E71  D3EB    		out	0ebh
0E73  D3DB    		out	0dbh
0E75  DBE8    		in	0e8h
0E77  D3D8    		out	0d8h
0E79  DBE9    		in	0e9h
0E7B  D3D9    		out	0d9h
0E7D  DBEB    		in	0ebh
0E7F  E67F    		ani	01111111b
0E81  D3EB    		out	0ebh
0E83  D3DB    		out	0dbh
0E85  AF      		xra	a
0E86  D3D9    		out	0d9h
0E88  DBD8    		in	0d8h
0E8A  3E0F    		mvi	a,00fh
0E8C  D3DC    		out	0dch
0E8E          	termlp:
0E8E  DBDD    		in	0ddh
0E90  E601    		ani	00000001b
0E92          		jrz	terml0
0E92  2804    		DB	28H,terml0-$-1
0E94  DBD8    		in	0d8h
0E96  D3E8    		out	0e8h
0E98          	terml0:
0E98  DBED    		in	0edh
0E9A  E601    		ani	00000001b
0E9C          		jrz	termlp
0E9C  28F0    		DB	28H,termlp-$-1
0E9E  DBE8    		in	0e8h
0EA0  D3D8    		out	0d8h
0EA2          		jr	termlp
0EA2  18EA    		DB	18H,termlp-$-1
		
0EA4  65726D69	terms:	db	'erminal Mode',TRM
      6E616C20
      4D6F6465
      00
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		; Print ROM version command
0EB1          	prtver:
0EB1  21BE0E  		lxi	h,versms
0EB4  CDA309  		call	msgout
0EB7  21D70E  		lxi	h,vernum
0EBA  CDA309  		call	msgout
0EBD  C9      		ret
		
0EBE  65727369	versms:	db	'ersion ',TRM
      6F6E2000
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0EC6  483820  	signon:	db	'H8 '
FFFF          	if z180
0EC9  5A313830		db	'Z180 '
      20
		endif
0ECE  4D6F6E69		db	'Monitor v'
      746F7220
      76
0ED7  322E30  	vernum:	db	(VERN SHR 4)+'0','.',(VERN AND 0fh)+'0'
0000          	if alpha
		endif
0003          	if beta
0EDA  28626574		db	'(beta',beta+'0',')'
      613329
		endif
0EE1  0D0A00  		db	CR,LF,TRM
		
			rept	1000h-$-2
0EE4  FF      		db	0ffh
0EE5  FF      		db	0ffh
0EE6  FF      		db	0ffh
0EE7  FF      		db	0ffh
0EE8  FF      		db	0ffh
0EE9  FF      		db	0ffh
0EEA  FF      		db	0ffh
0EEB  FF      		db	0ffh
0EEC  FF      		db	0ffh
0EED  FF      		db	0ffh
0EEE  FF      		db	0ffh
0EEF  FF      		db	0ffh
0EF0  FF      		db	0ffh
0EF1  FF      		db	0ffh
0EF2  FF      		db	0ffh
0EF3  FF      		db	0ffh
0EF4  FF      		db	0ffh
0EF5  FF      		db	0ffh
0EF6  FF      		db	0ffh
0EF7  FF      		db	0ffh
0EF8  FF      		db	0ffh
0EF9  FF      		db	0ffh
0EFA  FF      		db	0ffh
0EFB  FF      		db	0ffh
0EFC  FF      		db	0ffh
0EFD  FF      		db	0ffh
0EFE  FF      		db	0ffh
0EFF  FF      		db	0ffh
0F00  FF      		db	0ffh
0F01  FF      		db	0ffh
0F02  FF      		db	0ffh
0F03  FF      		db	0ffh
0F04  FF      		db	0ffh
0F05  FF      		db	0ffh
0F06  FF      		db	0ffh
0F07  FF      		db	0ffh
0F08  FF      		db	0ffh
0F09  FF      		db	0ffh
0F0A  FF      		db	0ffh
0F0B  FF      		db	0ffh
0F0C  FF      		db	0ffh
0F0D  FF      		db	0ffh
0F0E  FF      		db	0ffh
0F0F  FF      		db	0ffh
0F10  FF      		db	0ffh
0F11  FF      		db	0ffh
0F12  FF      		db	0ffh
0F13  FF      		db	0ffh
0F14  FF      		db	0ffh
0F15  FF      		db	0ffh
0F16  FF      		db	0ffh
0F17  FF      		db	0ffh
0F18  FF      		db	0ffh
0F19  FF      		db	0ffh
0F1A  FF      		db	0ffh
0F1B  FF      		db	0ffh
0F1C  FF      		db	0ffh
0F1D  FF      		db	0ffh
0F1E  FF      		db	0ffh
0F1F  FF      		db	0ffh
0F20  FF      		db	0ffh
0F21  FF      		db	0ffh
0F22  FF      		db	0ffh
0F23  FF      		db	0ffh
0F24  FF      		db	0ffh
0F25  FF      		db	0ffh
0F26  FF      		db	0ffh
0F27  FF      		db	0ffh
0F28  FF      		db	0ffh
0F29  FF      		db	0ffh
0F2A  FF      		db	0ffh
0F2B  FF      		db	0ffh
0F2C  FF      		db	0ffh
0F2D  FF      		db	0ffh
0F2E  FF      		db	0ffh
0F2F  FF      		db	0ffh
0F30  FF      		db	0ffh
0F31  FF      		db	0ffh
0F32  FF      		db	0ffh
0F33  FF      		db	0ffh
0F34  FF      		db	0ffh
0F35  FF      		db	0ffh
0F36  FF      		db	0ffh
0F37  FF      		db	0ffh
0F38  FF      		db	0ffh
0F39  FF      		db	0ffh
0F3A  FF      		db	0ffh
0F3B  FF      		db	0ffh
0F3C  FF      		db	0ffh
0F3D  FF      		db	0ffh
0F3E  FF      		db	0ffh
0F3F  FF      		db	0ffh
0F40  FF      		db	0ffh
0F41  FF      		db	0ffh
0F42  FF      		db	0ffh
0F43  FF      		db	0ffh
0F44  FF      		db	0ffh
0F45  FF      		db	0ffh
0F46  FF      		db	0ffh
0F47  FF      		db	0ffh
0F48  FF      		db	0ffh
0F49  FF      		db	0ffh
0F4A  FF      		db	0ffh
0F4B  FF      		db	0ffh
0F4C  FF      		db	0ffh
0F4D  FF      		db	0ffh
0F4E  FF      		db	0ffh
0F4F  FF      		db	0ffh
0F50  FF      		db	0ffh
0F51  FF      		db	0ffh
0F52  FF      		db	0ffh
0F53  FF      		db	0ffh
0F54  FF      		db	0ffh
0F55  FF      		db	0ffh
0F56  FF      		db	0ffh
0F57  FF      		db	0ffh
0F58  FF      		db	0ffh
0F59  FF      		db	0ffh
0F5A  FF      		db	0ffh
0F5B  FF      		db	0ffh
0F5C  FF      		db	0ffh
0F5D  FF      		db	0ffh
0F5E  FF      		db	0ffh
0F5F  FF      		db	0ffh
0F60  FF      		db	0ffh
0F61  FF      		db	0ffh
0F62  FF      		db	0ffh
0F63  FF      		db	0ffh
0F64  FF      		db	0ffh
0F65  FF      		db	0ffh
0F66  FF      		db	0ffh
0F67  FF      		db	0ffh
0F68  FF      		db	0ffh
0F69  FF      		db	0ffh
0F6A  FF      		db	0ffh
0F6B  FF      		db	0ffh
0F6C  FF      		db	0ffh
0F6D  FF      		db	0ffh
0F6E  FF      		db	0ffh
0F6F  FF      		db	0ffh
0F70  FF      		db	0ffh
0F71  FF      		db	0ffh
0F72  FF      		db	0ffh
0F73  FF      		db	0ffh
0F74  FF      		db	0ffh
0F75  FF      		db	0ffh
0F76  FF      		db	0ffh
0F77  FF      		db	0ffh
0F78  FF      		db	0ffh
0F79  FF      		db	0ffh
0F7A  FF      		db	0ffh
0F7B  FF      		db	0ffh
0F7C  FF      		db	0ffh
0F7D  FF      		db	0ffh
0F7E  FF      		db	0ffh
0F7F  FF      		db	0ffh
0F80  FF      		db	0ffh
0F81  FF      		db	0ffh
0F82  FF      		db	0ffh
0F83  FF      		db	0ffh
0F84  FF      		db	0ffh
0F85  FF      		db	0ffh
0F86  FF      		db	0ffh
0F87  FF      		db	0ffh
0F88  FF      		db	0ffh
0F89  FF      		db	0ffh
0F8A  FF      		db	0ffh
0F8B  FF      		db	0ffh
0F8C  FF      		db	0ffh
0F8D  FF      		db	0ffh
0F8E  FF      		db	0ffh
0F8F  FF      		db	0ffh
0F90  FF      		db	0ffh
0F91  FF      		db	0ffh
0F92  FF      		db	0ffh
0F93  FF      		db	0ffh
0F94  FF      		db	0ffh
0F95  FF      		db	0ffh
0F96  FF      		db	0ffh
0F97  FF      		db	0ffh
0F98  FF      		db	0ffh
0F99  FF      		db	0ffh
0F9A  FF      		db	0ffh
0F9B  FF      		db	0ffh
0F9C  FF      		db	0ffh
0F9D  FF      		db	0ffh
0F9E  FF      		db	0ffh
0F9F  FF      		db	0ffh
0FA0  FF      		db	0ffh
0FA1  FF      		db	0ffh
0FA2  FF      		db	0ffh
0FA3  FF      		db	0ffh
0FA4  FF      		db	0ffh
0FA5  FF      		db	0ffh
0FA6  FF      		db	0ffh
0FA7  FF      		db	0ffh
0FA8  FF      		db	0ffh
0FA9  FF      		db	0ffh
0FAA  FF      		db	0ffh
0FAB  FF      		db	0ffh
0FAC  FF      		db	0ffh
0FAD  FF      		db	0ffh
0FAE  FF      		db	0ffh
0FAF  FF      		db	0ffh
0FB0  FF      		db	0ffh
0FB1  FF      		db	0ffh
0FB2  FF      		db	0ffh
0FB3  FF      		db	0ffh
0FB4  FF      		db	0ffh
0FB5  FF      		db	0ffh
0FB6  FF      		db	0ffh
0FB7  FF      		db	0ffh
0FB8  FF      		db	0ffh
0FB9  FF      		db	0ffh
0FBA  FF      		db	0ffh
0FBB  FF      		db	0ffh
0FBC  FF      		db	0ffh
0FBD  FF      		db	0ffh
0FBE  FF      		db	0ffh
0FBF  FF      		db	0ffh
0FC0  FF      		db	0ffh
0FC1  FF      		db	0ffh
0FC2  FF      		db	0ffh
0FC3  FF      		db	0ffh
0FC4  FF      		db	0ffh
0FC5  FF      		db	0ffh
0FC6  FF      		db	0ffh
0FC7  FF      		db	0ffh
0FC8  FF      		db	0ffh
0FC9  FF      		db	0ffh
0FCA  FF      		db	0ffh
0FCB  FF      		db	0ffh
0FCC  FF      		db	0ffh
0FCD  FF      		db	0ffh
0FCE  FF      		db	0ffh
0FCF  FF      		db	0ffh
0FD0  FF      		db	0ffh
0FD1  FF      		db	0ffh
0FD2  FF      		db	0ffh
0FD3  FF      		db	0ffh
0FD4  FF      		db	0ffh
0FD5  FF      		db	0ffh
0FD6  FF      		db	0ffh
0FD7  FF      		db	0ffh
0FD8  FF      		db	0ffh
0FD9  FF      		db	0ffh
0FDA  FF      		db	0ffh
0FDB  FF      		db	0ffh
0FDC  FF      		db	0ffh
0FDD  FF      		db	0ffh
0FDE  FF      		db	0ffh
0FDF  FF      		db	0ffh
0FE0  FF      		db	0ffh
0FE1  FF      		db	0ffh
0FE2  FF      		db	0ffh
0FE3  FF      		db	0ffh
0FE4  FF      		db	0ffh
0FE5  FF      		db	0ffh
0FE6  FF      		db	0ffh
0FE7  FF      		db	0ffh
0FE8  FF      		db	0ffh
0FE9  FF      		db	0ffh
0FEA  FF      		db	0ffh
0FEB  FF      		db	0ffh
0FEC  FF      		db	0ffh
0FED  FF      		db	0ffh
0FEE  FF      		db	0ffh
0FEF  FF      		db	0ffh
0FF0  FF      		db	0ffh
0FF1  FF      		db	0ffh
0FF2  FF      		db	0ffh
0FF3  FF      		db	0ffh
0FF4  FF      		db	0ffh
0FF5  FF      		db	0ffh
0FF6  FF      		db	0ffh
0FF7  FF      		db	0ffh
0FF8  FF      		db	0ffh
0FF9  FF      		db	0ffh
0FFA  FF      		db	0ffh
0FFB  FF      		db	0ffh
0FFC  FF      		db	0ffh
0FFD  FF      		db	0ffh
0FFE  80F1    		dw	pcode	; product code for system
0000          	if	($ <> 1000h)
		endif
		
		; module overlay area starts here...
		; ensure this does not match any...
1000  FFFF    		dw	-1
1002  0000    		db	0,0
		
			rept	1800h-$
1004  FF      		db	0ffh
1005  FF      		db	0ffh
1006  FF      		db	0ffh
1007  FF      		db	0ffh
1008  FF      		db	0ffh
1009  FF      		db	0ffh
100A  FF      		db	0ffh
100B  FF      		db	0ffh
100C  FF      		db	0ffh
100D  FF      		db	0ffh
100E  FF      		db	0ffh
100F  FF      		db	0ffh
1010  FF      		db	0ffh
1011  FF      		db	0ffh
1012  FF      		db	0ffh
1013  FF      		db	0ffh
1014  FF      		db	0ffh
1015  FF      		db	0ffh
1016  FF      		db	0ffh
1017  FF      		db	0ffh
1018  FF      		db	0ffh
1019  FF      		db	0ffh
101A  FF      		db	0ffh
101B  FF      		db	0ffh
101C  FF      		db	0ffh
101D  FF      		db	0ffh
101E  FF      		db	0ffh
101F  FF      		db	0ffh
1020  FF      		db	0ffh
1021  FF      		db	0ffh
1022  FF      		db	0ffh
1023  FF      		db	0ffh
1024  FF      		db	0ffh
1025  FF      		db	0ffh
1026  FF      		db	0ffh
1027  FF      		db	0ffh
1028  FF      		db	0ffh
1029  FF      		db	0ffh
102A  FF      		db	0ffh
102B  FF      		db	0ffh
102C  FF      		db	0ffh
102D  FF      		db	0ffh
102E  FF      		db	0ffh
102F  FF      		db	0ffh
1030  FF      		db	0ffh
1031  FF      		db	0ffh
1032  FF      		db	0ffh
1033  FF      		db	0ffh
1034  FF      		db	0ffh
1035  FF      		db	0ffh
1036  FF      		db	0ffh
1037  FF      		db	0ffh
1038  FF      		db	0ffh
1039  FF      		db	0ffh
103A  FF      		db	0ffh
103B  FF      		db	0ffh
103C  FF      		db	0ffh
103D  FF      		db	0ffh
103E  FF      		db	0ffh
103F  FF      		db	0ffh
1040  FF      		db	0ffh
1041  FF      		db	0ffh
1042  FF      		db	0ffh
1043  FF      		db	0ffh
1044  FF      		db	0ffh
1045  FF      		db	0ffh
1046  FF      		db	0ffh
1047  FF      		db	0ffh
1048  FF      		db	0ffh
1049  FF      		db	0ffh
104A  FF      		db	0ffh
104B  FF      		db	0ffh
104C  FF      		db	0ffh
104D  FF      		db	0ffh
104E  FF      		db	0ffh
104F  FF      		db	0ffh
1050  FF      		db	0ffh
1051  FF      		db	0ffh
1052  FF      		db	0ffh
1053  FF      		db	0ffh
1054  FF      		db	0ffh
1055  FF      		db	0ffh
1056  FF      		db	0ffh
1057  FF      		db	0ffh
1058  FF      		db	0ffh
1059  FF      		db	0ffh
105A  FF      		db	0ffh
105B  FF      		db	0ffh
105C  FF      		db	0ffh
105D  FF      		db	0ffh
105E  FF      		db	0ffh
105F  FF      		db	0ffh
1060  FF      		db	0ffh
1061  FF      		db	0ffh
1062  FF      		db	0ffh
1063  FF      		db	0ffh
1064  FF      		db	0ffh
1065  FF      		db	0ffh
1066  FF      		db	0ffh
1067  FF      		db	0ffh
1068  FF      		db	0ffh
1069  FF      		db	0ffh
106A  FF      		db	0ffh
106B  FF      		db	0ffh
106C  FF      		db	0ffh
106D  FF      		db	0ffh
106E  FF      		db	0ffh
106F  FF      		db	0ffh
1070  FF      		db	0ffh
1071  FF      		db	0ffh
1072  FF      		db	0ffh
1073  FF      		db	0ffh
1074  FF      		db	0ffh
1075  FF      		db	0ffh
1076  FF      		db	0ffh
1077  FF      		db	0ffh
1078  FF      		db	0ffh
1079  FF      		db	0ffh
107A  FF      		db	0ffh
107B  FF      		db	0ffh
107C  FF      		db	0ffh
107D  FF      		db	0ffh
107E  FF      		db	0ffh
107F  FF      		db	0ffh
1080  FF      		db	0ffh
1081  FF      		db	0ffh
1082  FF      		db	0ffh
1083  FF      		db	0ffh
1084  FF      		db	0ffh
1085  FF      		db	0ffh
1086  FF      		db	0ffh
1087  FF      		db	0ffh
1088  FF      		db	0ffh
1089  FF      		db	0ffh
108A  FF      		db	0ffh
108B  FF      		db	0ffh
108C  FF      		db	0ffh
108D  FF      		db	0ffh
108E  FF      		db	0ffh
108F  FF      		db	0ffh
1090  FF      		db	0ffh
1091  FF      		db	0ffh
1092  FF      		db	0ffh
1093  FF      		db	0ffh
1094  FF      		db	0ffh
1095  FF      		db	0ffh
1096  FF      		db	0ffh
1097  FF      		db	0ffh
1098  FF      		db	0ffh
1099  FF      		db	0ffh
109A  FF      		db	0ffh
109B  FF      		db	0ffh
109C  FF      		db	0ffh
109D  FF      		db	0ffh
109E  FF      		db	0ffh
109F  FF      		db	0ffh
10A0  FF      		db	0ffh
10A1  FF      		db	0ffh
10A2  FF      		db	0ffh
10A3  FF      		db	0ffh
10A4  FF      		db	0ffh
10A5  FF      		db	0ffh
10A6  FF      		db	0ffh
10A7  FF      		db	0ffh
10A8  FF      		db	0ffh
10A9  FF      		db	0ffh
10AA  FF      		db	0ffh
10AB  FF      		db	0ffh
10AC  FF      		db	0ffh
10AD  FF      		db	0ffh
10AE  FF      		db	0ffh
10AF  FF      		db	0ffh
10B0  FF      		db	0ffh
10B1  FF      		db	0ffh
10B2  FF      		db	0ffh
10B3  FF      		db	0ffh
10B4  FF      		db	0ffh
10B5  FF      		db	0ffh
10B6  FF      		db	0ffh
10B7  FF      		db	0ffh
10B8  FF      		db	0ffh
10B9  FF      		db	0ffh
10BA  FF      		db	0ffh
10BB  FF      		db	0ffh
10BC  FF      		db	0ffh
10BD  FF      		db	0ffh
10BE  FF      		db	0ffh
10BF  FF      		db	0ffh
10C0  FF      		db	0ffh
10C1  FF      		db	0ffh
10C2  FF      		db	0ffh
10C3  FF      		db	0ffh
10C4  FF      		db	0ffh
10C5  FF      		db	0ffh
10C6  FF      		db	0ffh
10C7  FF      		db	0ffh
10C8  FF      		db	0ffh
10C9  FF      		db	0ffh
10CA  FF      		db	0ffh
10CB  FF      		db	0ffh
10CC  FF      		db	0ffh
10CD  FF      		db	0ffh
10CE  FF      		db	0ffh
10CF  FF      		db	0ffh
10D0  FF      		db	0ffh
10D1  FF      		db	0ffh
10D2  FF      		db	0ffh
10D3  FF      		db	0ffh
10D4  FF      		db	0ffh
10D5  FF      		db	0ffh
10D6  FF      		db	0ffh
10D7  FF      		db	0ffh
10D8  FF      		db	0ffh
10D9  FF      		db	0ffh
10DA  FF      		db	0ffh
10DB  FF      		db	0ffh
10DC  FF      		db	0ffh
10DD  FF      		db	0ffh
10DE  FF      		db	0ffh
10DF  FF      		db	0ffh
10E0  FF      		db	0ffh
10E1  FF      		db	0ffh
10E2  FF      		db	0ffh
10E3  FF      		db	0ffh
10E4  FF      		db	0ffh
10E5  FF      		db	0ffh
10E6  FF      		db	0ffh
10E7  FF      		db	0ffh
10E8  FF      		db	0ffh
10E9  FF      		db	0ffh
10EA  FF      		db	0ffh
10EB  FF      		db	0ffh
10EC  FF      		db	0ffh
10ED  FF      		db	0ffh
10EE  FF      		db	0ffh
10EF  FF      		db	0ffh
10F0  FF      		db	0ffh
10F1  FF      		db	0ffh
10F2  FF      		db	0ffh
10F3  FF      		db	0ffh
10F4  FF      		db	0ffh
10F5  FF      		db	0ffh
10F6  FF      		db	0ffh
10F7  FF      		db	0ffh
10F8  FF      		db	0ffh
10F9  FF      		db	0ffh
10FA  FF      		db	0ffh
10FB  FF      		db	0ffh
10FC  FF      		db	0ffh
10FD  FF      		db	0ffh
10FE  FF      		db	0ffh
10FF  FF      		db	0ffh
1100  FF      		db	0ffh
1101  FF      		db	0ffh
1102  FF      		db	0ffh
1103  FF      		db	0ffh
1104  FF      		db	0ffh
1105  FF      		db	0ffh
1106  FF      		db	0ffh
1107  FF      		db	0ffh
1108  FF      		db	0ffh
1109  FF      		db	0ffh
110A  FF      		db	0ffh
110B  FF      		db	0ffh
110C  FF      		db	0ffh
110D  FF      		db	0ffh
110E  FF      		db	0ffh
110F  FF      		db	0ffh
1110  FF      		db	0ffh
1111  FF      		db	0ffh
1112  FF      		db	0ffh
1113  FF      		db	0ffh
1114  FF      		db	0ffh
1115  FF      		db	0ffh
1116  FF      		db	0ffh
1117  FF      		db	0ffh
1118  FF      		db	0ffh
1119  FF      		db	0ffh
111A  FF      		db	0ffh
111B  FF      		db	0ffh
111C  FF      		db	0ffh
111D  FF      		db	0ffh
111E  FF      		db	0ffh
111F  FF      		db	0ffh
1120  FF      		db	0ffh
1121  FF      		db	0ffh
1122  FF      		db	0ffh
1123  FF      		db	0ffh
1124  FF      		db	0ffh
1125  FF      		db	0ffh
1126  FF      		db	0ffh
1127  FF      		db	0ffh
1128  FF      		db	0ffh
1129  FF      		db	0ffh
112A  FF      		db	0ffh
112B  FF      		db	0ffh
112C  FF      		db	0ffh
112D  FF      		db	0ffh
112E  FF      		db	0ffh
112F  FF      		db	0ffh
1130  FF      		db	0ffh
1131  FF      		db	0ffh
1132  FF      		db	0ffh
1133  FF      		db	0ffh
1134  FF      		db	0ffh
1135  FF      		db	0ffh
1136  FF      		db	0ffh
1137  FF      		db	0ffh
1138  FF      		db	0ffh
1139  FF      		db	0ffh
113A  FF      		db	0ffh
113B  FF      		db	0ffh
113C  FF      		db	0ffh
113D  FF      		db	0ffh
113E  FF      		db	0ffh
113F  FF      		db	0ffh
1140  FF      		db	0ffh
1141  FF      		db	0ffh
1142  FF      		db	0ffh
1143  FF      		db	0ffh
1144  FF      		db	0ffh
1145  FF      		db	0ffh
1146  FF      		db	0ffh
1147  FF      		db	0ffh
1148  FF      		db	0ffh
1149  FF      		db	0ffh
114A  FF      		db	0ffh
114B  FF      		db	0ffh
114C  FF      		db	0ffh
114D  FF      		db	0ffh
114E  FF      		db	0ffh
114F  FF      		db	0ffh
1150  FF      		db	0ffh
1151  FF      		db	0ffh
1152  FF      		db	0ffh
1153  FF      		db	0ffh
1154  FF      		db	0ffh
1155  FF      		db	0ffh
1156  FF      		db	0ffh
1157  FF      		db	0ffh
1158  FF      		db	0ffh
1159  FF      		db	0ffh
115A  FF      		db	0ffh
115B  FF      		db	0ffh
115C  FF      		db	0ffh
115D  FF      		db	0ffh
115E  FF      		db	0ffh
115F  FF      		db	0ffh
1160  FF      		db	0ffh
1161  FF      		db	0ffh
1162  FF      		db	0ffh
1163  FF      		db	0ffh
1164  FF      		db	0ffh
1165  FF      		db	0ffh
1166  FF      		db	0ffh
1167  FF      		db	0ffh
1168  FF      		db	0ffh
1169  FF      		db	0ffh
116A  FF      		db	0ffh
116B  FF      		db	0ffh
116C  FF      		db	0ffh
116D  FF      		db	0ffh
116E  FF      		db	0ffh
116F  FF      		db	0ffh
1170  FF      		db	0ffh
1171  FF      		db	0ffh
1172  FF      		db	0ffh
1173  FF      		db	0ffh
1174  FF      		db	0ffh
1175  FF      		db	0ffh
1176  FF      		db	0ffh
1177  FF      		db	0ffh
1178  FF      		db	0ffh
1179  FF      		db	0ffh
117A  FF      		db	0ffh
117B  FF      		db	0ffh
117C  FF      		db	0ffh
117D  FF      		db	0ffh
117E  FF      		db	0ffh
117F  FF      		db	0ffh
1180  FF      		db	0ffh
1181  FF      		db	0ffh
1182  FF      		db	0ffh
1183  FF      		db	0ffh
1184  FF      		db	0ffh
1185  FF      		db	0ffh
1186  FF      		db	0ffh
1187  FF      		db	0ffh
1188  FF      		db	0ffh
1189  FF      		db	0ffh
118A  FF      		db	0ffh
118B  FF      		db	0ffh
118C  FF      		db	0ffh
118D  FF      		db	0ffh
118E  FF      		db	0ffh
118F  FF      		db	0ffh
1190  FF      		db	0ffh
1191  FF      		db	0ffh
1192  FF      		db	0ffh
1193  FF      		db	0ffh
1194  FF      		db	0ffh
1195  FF      		db	0ffh
1196  FF      		db	0ffh
1197  FF      		db	0ffh
1198  FF      		db	0ffh
1199  FF      		db	0ffh
119A  FF      		db	0ffh
119B  FF      		db	0ffh
119C  FF      		db	0ffh
119D  FF      		db	0ffh
119E  FF      		db	0ffh
119F  FF      		db	0ffh
11A0  FF      		db	0ffh
11A1  FF      		db	0ffh
11A2  FF      		db	0ffh
11A3  FF      		db	0ffh
11A4  FF      		db	0ffh
11A5  FF      		db	0ffh
11A6  FF      		db	0ffh
11A7  FF      		db	0ffh
11A8  FF      		db	0ffh
11A9  FF      		db	0ffh
11AA  FF      		db	0ffh
11AB  FF      		db	0ffh
11AC  FF      		db	0ffh
11AD  FF      		db	0ffh
11AE  FF      		db	0ffh
11AF  FF      		db	0ffh
11B0  FF      		db	0ffh
11B1  FF      		db	0ffh
11B2  FF      		db	0ffh
11B3  FF      		db	0ffh
11B4  FF      		db	0ffh
11B5  FF      		db	0ffh
11B6  FF      		db	0ffh
11B7  FF      		db	0ffh
11B8  FF      		db	0ffh
11B9  FF      		db	0ffh
11BA  FF      		db	0ffh
11BB  FF      		db	0ffh
11BC  FF      		db	0ffh
11BD  FF      		db	0ffh
11BE  FF      		db	0ffh
11BF  FF      		db	0ffh
11C0  FF      		db	0ffh
11C1  FF      		db	0ffh
11C2  FF      		db	0ffh
11C3  FF      		db	0ffh
11C4  FF      		db	0ffh
11C5  FF      		db	0ffh
11C6  FF      		db	0ffh
11C7  FF      		db	0ffh
11C8  FF      		db	0ffh
11C9  FF      		db	0ffh
11CA  FF      		db	0ffh
11CB  FF      		db	0ffh
11CC  FF      		db	0ffh
11CD  FF      		db	0ffh
11CE  FF      		db	0ffh
11CF  FF      		db	0ffh
11D0  FF      		db	0ffh
11D1  FF      		db	0ffh
11D2  FF      		db	0ffh
11D3  FF      		db	0ffh
11D4  FF      		db	0ffh
11D5  FF      		db	0ffh
11D6  FF      		db	0ffh
11D7  FF      		db	0ffh
11D8  FF      		db	0ffh
11D9  FF      		db	0ffh
11DA  FF      		db	0ffh
11DB  FF      		db	0ffh
11DC  FF      		db	0ffh
11DD  FF      		db	0ffh
11DE  FF      		db	0ffh
11DF  FF      		db	0ffh
11E0  FF      		db	0ffh
11E1  FF      		db	0ffh
11E2  FF      		db	0ffh
11E3  FF      		db	0ffh
11E4  FF      		db	0ffh
11E5  FF      		db	0ffh
11E6  FF      		db	0ffh
11E7  FF      		db	0ffh
11E8  FF      		db	0ffh
11E9  FF      		db	0ffh
11EA  FF      		db	0ffh
11EB  FF      		db	0ffh
11EC  FF      		db	0ffh
11ED  FF      		db	0ffh
11EE  FF      		db	0ffh
11EF  FF      		db	0ffh
11F0  FF      		db	0ffh
11F1  FF      		db	0ffh
11F2  FF      		db	0ffh
11F3  FF      		db	0ffh
11F4  FF      		db	0ffh
11F5  FF      		db	0ffh
11F6  FF      		db	0ffh
11F7  FF      		db	0ffh
11F8  FF      		db	0ffh
11F9  FF      		db	0ffh
11FA  FF      		db	0ffh
11FB  FF      		db	0ffh
11FC  FF      		db	0ffh
11FD  FF      		db	0ffh
11FE  FF      		db	0ffh
11FF  FF      		db	0ffh
1200  FF      		db	0ffh
1201  FF      		db	0ffh
1202  FF      		db	0ffh
1203  FF      		db	0ffh
1204  FF      		db	0ffh
1205  FF      		db	0ffh
1206  FF      		db	0ffh
1207  FF      		db	0ffh
1208  FF      		db	0ffh
1209  FF      		db	0ffh
120A  FF      		db	0ffh
120B  FF      		db	0ffh
120C  FF      		db	0ffh
120D  FF      		db	0ffh
120E  FF      		db	0ffh
120F  FF      		db	0ffh
1210  FF      		db	0ffh
1211  FF      		db	0ffh
1212  FF      		db	0ffh
1213  FF      		db	0ffh
1214  FF      		db	0ffh
1215  FF      		db	0ffh
1216  FF      		db	0ffh
1217  FF      		db	0ffh
1218  FF      		db	0ffh
1219  FF      		db	0ffh
121A  FF      		db	0ffh
121B  FF      		db	0ffh
121C  FF      		db	0ffh
121D  FF      		db	0ffh
121E  FF      		db	0ffh
121F  FF      		db	0ffh
1220  FF      		db	0ffh
1221  FF      		db	0ffh
1222  FF      		db	0ffh
1223  FF      		db	0ffh
1224  FF      		db	0ffh
1225  FF      		db	0ffh
1226  FF      		db	0ffh
1227  FF      		db	0ffh
1228  FF      		db	0ffh
1229  FF      		db	0ffh
122A  FF      		db	0ffh
122B  FF      		db	0ffh
122C  FF      		db	0ffh
122D  FF      		db	0ffh
122E  FF      		db	0ffh
122F  FF      		db	0ffh
1230  FF      		db	0ffh
1231  FF      		db	0ffh
1232  FF      		db	0ffh
1233  FF      		db	0ffh
1234  FF      		db	0ffh
1235  FF      		db	0ffh
1236  FF      		db	0ffh
1237  FF      		db	0ffh
1238  FF      		db	0ffh
1239  FF      		db	0ffh
123A  FF      		db	0ffh
123B  FF      		db	0ffh
123C  FF      		db	0ffh
123D  FF      		db	0ffh
123E  FF      		db	0ffh
123F  FF      		db	0ffh
1240  FF      		db	0ffh
1241  FF      		db	0ffh
1242  FF      		db	0ffh
1243  FF      		db	0ffh
1244  FF      		db	0ffh
1245  FF      		db	0ffh
1246  FF      		db	0ffh
1247  FF      		db	0ffh
1248  FF      		db	0ffh
1249  FF      		db	0ffh
124A  FF      		db	0ffh
124B  FF      		db	0ffh
124C  FF      		db	0ffh
124D  FF      		db	0ffh
124E  FF      		db	0ffh
124F  FF      		db	0ffh
1250  FF      		db	0ffh
1251  FF      		db	0ffh
1252  FF      		db	0ffh
1253  FF      		db	0ffh
1254  FF      		db	0ffh
1255  FF      		db	0ffh
1256  FF      		db	0ffh
1257  FF      		db	0ffh
1258  FF      		db	0ffh
1259  FF      		db	0ffh
125A  FF      		db	0ffh
125B  FF      		db	0ffh
125C  FF      		db	0ffh
125D  FF      		db	0ffh
125E  FF      		db	0ffh
125F  FF      		db	0ffh
1260  FF      		db	0ffh
1261  FF      		db	0ffh
1262  FF      		db	0ffh
1263  FF      		db	0ffh
1264  FF      		db	0ffh
1265  FF      		db	0ffh
1266  FF      		db	0ffh
1267  FF      		db	0ffh
1268  FF      		db	0ffh
1269  FF      		db	0ffh
126A  FF      		db	0ffh
126B  FF      		db	0ffh
126C  FF      		db	0ffh
126D  FF      		db	0ffh
126E  FF      		db	0ffh
126F  FF      		db	0ffh
1270  FF      		db	0ffh
1271  FF      		db	0ffh
1272  FF      		db	0ffh
1273  FF      		db	0ffh
1274  FF      		db	0ffh
1275  FF      		db	0ffh
1276  FF      		db	0ffh
1277  FF      		db	0ffh
1278  FF      		db	0ffh
1279  FF      		db	0ffh
127A  FF      		db	0ffh
127B  FF      		db	0ffh
127C  FF      		db	0ffh
127D  FF      		db	0ffh
127E  FF      		db	0ffh
127F  FF      		db	0ffh
1280  FF      		db	0ffh
1281  FF      		db	0ffh
1282  FF      		db	0ffh
1283  FF      		db	0ffh
1284  FF      		db	0ffh
1285  FF      		db	0ffh
1286  FF      		db	0ffh
1287  FF      		db	0ffh
1288  FF      		db	0ffh
1289  FF      		db	0ffh
128A  FF      		db	0ffh
128B  FF      		db	0ffh
128C  FF      		db	0ffh
128D  FF      		db	0ffh
128E  FF      		db	0ffh
128F  FF      		db	0ffh
1290  FF      		db	0ffh
1291  FF      		db	0ffh
1292  FF      		db	0ffh
1293  FF      		db	0ffh
1294  FF      		db	0ffh
1295  FF      		db	0ffh
1296  FF      		db	0ffh
1297  FF      		db	0ffh
1298  FF      		db	0ffh
1299  FF      		db	0ffh
129A  FF      		db	0ffh
129B  FF      		db	0ffh
129C  FF      		db	0ffh
129D  FF      		db	0ffh
129E  FF      		db	0ffh
129F  FF      		db	0ffh
12A0  FF      		db	0ffh
12A1  FF      		db	0ffh
12A2  FF      		db	0ffh
12A3  FF      		db	0ffh
12A4  FF      		db	0ffh
12A5  FF      		db	0ffh
12A6  FF      		db	0ffh
12A7  FF      		db	0ffh
12A8  FF      		db	0ffh
12A9  FF      		db	0ffh
12AA  FF      		db	0ffh
12AB  FF      		db	0ffh
12AC  FF      		db	0ffh
12AD  FF      		db	0ffh
12AE  FF      		db	0ffh
12AF  FF      		db	0ffh
12B0  FF      		db	0ffh
12B1  FF      		db	0ffh
12B2  FF      		db	0ffh
12B3  FF      		db	0ffh
12B4  FF      		db	0ffh
12B5  FF      		db	0ffh
12B6  FF      		db	0ffh
12B7  FF      		db	0ffh
12B8  FF      		db	0ffh
12B9  FF      		db	0ffh
12BA  FF      		db	0ffh
12BB  FF      		db	0ffh
12BC  FF      		db	0ffh
12BD  FF      		db	0ffh
12BE  FF      		db	0ffh
12BF  FF      		db	0ffh
12C0  FF      		db	0ffh
12C1  FF      		db	0ffh
12C2  FF      		db	0ffh
12C3  FF      		db	0ffh
12C4  FF      		db	0ffh
12C5  FF      		db	0ffh
12C6  FF      		db	0ffh
12C7  FF      		db	0ffh
12C8  FF      		db	0ffh
12C9  FF      		db	0ffh
12CA  FF      		db	0ffh
12CB  FF      		db	0ffh
12CC  FF      		db	0ffh
12CD  FF      		db	0ffh
12CE  FF      		db	0ffh
12CF  FF      		db	0ffh
12D0  FF      		db	0ffh
12D1  FF      		db	0ffh
12D2  FF      		db	0ffh
12D3  FF      		db	0ffh
12D4  FF      		db	0ffh
12D5  FF      		db	0ffh
12D6  FF      		db	0ffh
12D7  FF      		db	0ffh
12D8  FF      		db	0ffh
12D9  FF      		db	0ffh
12DA  FF      		db	0ffh
12DB  FF      		db	0ffh
12DC  FF      		db	0ffh
12DD  FF      		db	0ffh
12DE  FF      		db	0ffh
12DF  FF      		db	0ffh
12E0  FF      		db	0ffh
12E1  FF      		db	0ffh
12E2  FF      		db	0ffh
12E3  FF      		db	0ffh
12E4  FF      		db	0ffh
12E5  FF      		db	0ffh
12E6  FF      		db	0ffh
12E7  FF      		db	0ffh
12E8  FF      		db	0ffh
12E9  FF      		db	0ffh
12EA  FF      		db	0ffh
12EB  FF      		db	0ffh
12EC  FF      		db	0ffh
12ED  FF      		db	0ffh
12EE  FF      		db	0ffh
12EF  FF      		db	0ffh
12F0  FF      		db	0ffh
12F1  FF      		db	0ffh
12F2  FF      		db	0ffh
12F3  FF      		db	0ffh
12F4  FF      		db	0ffh
12F5  FF      		db	0ffh
12F6  FF      		db	0ffh
12F7  FF      		db	0ffh
12F8  FF      		db	0ffh
12F9  FF      		db	0ffh
12FA  FF      		db	0ffh
12FB  FF      		db	0ffh
12FC  FF      		db	0ffh
12FD  FF      		db	0ffh
12FE  FF      		db	0ffh
12FF  FF      		db	0ffh
1300  FF      		db	0ffh
1301  FF      		db	0ffh
1302  FF      		db	0ffh
1303  FF      		db	0ffh
1304  FF      		db	0ffh
1305  FF      		db	0ffh
1306  FF      		db	0ffh
1307  FF      		db	0ffh
1308  FF      		db	0ffh
1309  FF      		db	0ffh
130A  FF      		db	0ffh
130B  FF      		db	0ffh
130C  FF      		db	0ffh
130D  FF      		db	0ffh
130E  FF      		db	0ffh
130F  FF      		db	0ffh
1310  FF      		db	0ffh
1311  FF      		db	0ffh
1312  FF      		db	0ffh
1313  FF      		db	0ffh
1314  FF      		db	0ffh
1315  FF      		db	0ffh
1316  FF      		db	0ffh
1317  FF      		db	0ffh
1318  FF      		db	0ffh
1319  FF      		db	0ffh
131A  FF      		db	0ffh
131B  FF      		db	0ffh
131C  FF      		db	0ffh
131D  FF      		db	0ffh
131E  FF      		db	0ffh
131F  FF      		db	0ffh
1320  FF      		db	0ffh
1321  FF      		db	0ffh
1322  FF      		db	0ffh
1323  FF      		db	0ffh
1324  FF      		db	0ffh
1325  FF      		db	0ffh
1326  FF      		db	0ffh
1327  FF      		db	0ffh
1328  FF      		db	0ffh
1329  FF      		db	0ffh
132A  FF      		db	0ffh
132B  FF      		db	0ffh
132C  FF      		db	0ffh
132D  FF      		db	0ffh
132E  FF      		db	0ffh
132F  FF      		db	0ffh
1330  FF      		db	0ffh
1331  FF      		db	0ffh
1332  FF      		db	0ffh
1333  FF      		db	0ffh
1334  FF      		db	0ffh
1335  FF      		db	0ffh
1336  FF      		db	0ffh
1337  FF      		db	0ffh
1338  FF      		db	0ffh
1339  FF      		db	0ffh
133A  FF      		db	0ffh
133B  FF      		db	0ffh
133C  FF      		db	0ffh
133D  FF      		db	0ffh
133E  FF      		db	0ffh
133F  FF      		db	0ffh
1340  FF      		db	0ffh
1341  FF      		db	0ffh
1342  FF      		db	0ffh
1343  FF      		db	0ffh
1344  FF      		db	0ffh
1345  FF      		db	0ffh
1346  FF      		db	0ffh
1347  FF      		db	0ffh
1348  FF      		db	0ffh
1349  FF      		db	0ffh
134A  FF      		db	0ffh
134B  FF      		db	0ffh
134C  FF      		db	0ffh
134D  FF      		db	0ffh
134E  FF      		db	0ffh
134F  FF      		db	0ffh
1350  FF      		db	0ffh
1351  FF      		db	0ffh
1352  FF      		db	0ffh
1353  FF      		db	0ffh
1354  FF      		db	0ffh
1355  FF      		db	0ffh
1356  FF      		db	0ffh
1357  FF      		db	0ffh
1358  FF      		db	0ffh
1359  FF      		db	0ffh
135A  FF      		db	0ffh
135B  FF      		db	0ffh
135C  FF      		db	0ffh
135D  FF      		db	0ffh
135E  FF      		db	0ffh
135F  FF      		db	0ffh
1360  FF      		db	0ffh
1361  FF      		db	0ffh
1362  FF      		db	0ffh
1363  FF      		db	0ffh
1364  FF      		db	0ffh
1365  FF      		db	0ffh
1366  FF      		db	0ffh
1367  FF      		db	0ffh
1368  FF      		db	0ffh
1369  FF      		db	0ffh
136A  FF      		db	0ffh
136B  FF      		db	0ffh
136C  FF      		db	0ffh
136D  FF      		db	0ffh
136E  FF      		db	0ffh
136F  FF      		db	0ffh
1370  FF      		db	0ffh
1371  FF      		db	0ffh
1372  FF      		db	0ffh
1373  FF      		db	0ffh
1374  FF      		db	0ffh
1375  FF      		db	0ffh
1376  FF      		db	0ffh
1377  FF      		db	0ffh
1378  FF      		db	0ffh
1379  FF      		db	0ffh
137A  FF      		db	0ffh
137B  FF      		db	0ffh
137C  FF      		db	0ffh
137D  FF      		db	0ffh
137E  FF      		db	0ffh
137F  FF      		db	0ffh
1380  FF      		db	0ffh
1381  FF      		db	0ffh
1382  FF      		db	0ffh
1383  FF      		db	0ffh
1384  FF      		db	0ffh
1385  FF      		db	0ffh
1386  FF      		db	0ffh
1387  FF      		db	0ffh
1388  FF      		db	0ffh
1389  FF      		db	0ffh
138A  FF      		db	0ffh
138B  FF      		db	0ffh
138C  FF      		db	0ffh
138D  FF      		db	0ffh
138E  FF      		db	0ffh
138F  FF      		db	0ffh
1390  FF      		db	0ffh
1391  FF      		db	0ffh
1392  FF      		db	0ffh
1393  FF      		db	0ffh
1394  FF      		db	0ffh
1395  FF      		db	0ffh
1396  FF      		db	0ffh
1397  FF      		db	0ffh
1398  FF      		db	0ffh
1399  FF      		db	0ffh
139A  FF      		db	0ffh
139B  FF      		db	0ffh
139C  FF      		db	0ffh
139D  FF      		db	0ffh
139E  FF      		db	0ffh
139F  FF      		db	0ffh
13A0  FF      		db	0ffh
13A1  FF      		db	0ffh
13A2  FF      		db	0ffh
13A3  FF      		db	0ffh
13A4  FF      		db	0ffh
13A5  FF      		db	0ffh
13A6  FF      		db	0ffh
13A7  FF      		db	0ffh
13A8  FF      		db	0ffh
13A9  FF      		db	0ffh
13AA  FF      		db	0ffh
13AB  FF      		db	0ffh
13AC  FF      		db	0ffh
13AD  FF      		db	0ffh
13AE  FF      		db	0ffh
13AF  FF      		db	0ffh
13B0  FF      		db	0ffh
13B1  FF      		db	0ffh
13B2  FF      		db	0ffh
13B3  FF      		db	0ffh
13B4  FF      		db	0ffh
13B5  FF      		db	0ffh
13B6  FF      		db	0ffh
13B7  FF      		db	0ffh
13B8  FF      		db	0ffh
13B9  FF      		db	0ffh
13BA  FF      		db	0ffh
13BB  FF      		db	0ffh
13BC  FF      		db	0ffh
13BD  FF      		db	0ffh
13BE  FF      		db	0ffh
13BF  FF      		db	0ffh
13C0  FF      		db	0ffh
13C1  FF      		db	0ffh
13C2  FF      		db	0ffh
13C3  FF      		db	0ffh
13C4  FF      		db	0ffh
13C5  FF      		db	0ffh
13C6  FF      		db	0ffh
13C7  FF      		db	0ffh
13C8  FF      		db	0ffh
13C9  FF      		db	0ffh
13CA  FF      		db	0ffh
13CB  FF      		db	0ffh
13CC  FF      		db	0ffh
13CD  FF      		db	0ffh
13CE  FF      		db	0ffh
13CF  FF      		db	0ffh
13D0  FF      		db	0ffh
13D1  FF      		db	0ffh
13D2  FF      		db	0ffh
13D3  FF      		db	0ffh
13D4  FF      		db	0ffh
13D5  FF      		db	0ffh
13D6  FF      		db	0ffh
13D7  FF      		db	0ffh
13D8  FF      		db	0ffh
13D9  FF      		db	0ffh
13DA  FF      		db	0ffh
13DB  FF      		db	0ffh
13DC  FF      		db	0ffh
13DD  FF      		db	0ffh
13DE  FF      		db	0ffh
13DF  FF      		db	0ffh
13E0  FF      		db	0ffh
13E1  FF      		db	0ffh
13E2  FF      		db	0ffh
13E3  FF      		db	0ffh
13E4  FF      		db	0ffh
13E5  FF      		db	0ffh
13E6  FF      		db	0ffh
13E7  FF      		db	0ffh
13E8  FF      		db	0ffh
13E9  FF      		db	0ffh
13EA  FF      		db	0ffh
13EB  FF      		db	0ffh
13EC  FF      		db	0ffh
13ED  FF      		db	0ffh
13EE  FF      		db	0ffh
13EF  FF      		db	0ffh
13F0  FF      		db	0ffh
13F1  FF      		db	0ffh
13F2  FF      		db	0ffh
13F3  FF      		db	0ffh
13F4  FF      		db	0ffh
13F5  FF      		db	0ffh
13F6  FF      		db	0ffh
13F7  FF      		db	0ffh
13F8  FF      		db	0ffh
13F9  FF      		db	0ffh
13FA  FF      		db	0ffh
13FB  FF      		db	0ffh
13FC  FF      		db	0ffh
13FD  FF      		db	0ffh
13FE  FF      		db	0ffh
13FF  FF      		db	0ffh
1400  FF      		db	0ffh
1401  FF      		db	0ffh
1402  FF      		db	0ffh
1403  FF      		db	0ffh
1404  FF      		db	0ffh
1405  FF      		db	0ffh
1406  FF      		db	0ffh
1407  FF      		db	0ffh
1408  FF      		db	0ffh
1409  FF      		db	0ffh
140A  FF      		db	0ffh
140B  FF      		db	0ffh
140C  FF      		db	0ffh
140D  FF      		db	0ffh
140E  FF      		db	0ffh
140F  FF      		db	0ffh
1410  FF      		db	0ffh
1411  FF      		db	0ffh
1412  FF      		db	0ffh
1413  FF      		db	0ffh
1414  FF      		db	0ffh
1415  FF      		db	0ffh
1416  FF      		db	0ffh
1417  FF      		db	0ffh
1418  FF      		db	0ffh
1419  FF      		db	0ffh
141A  FF      		db	0ffh
141B  FF      		db	0ffh
141C  FF      		db	0ffh
141D  FF      		db	0ffh
141E  FF      		db	0ffh
141F  FF      		db	0ffh
1420  FF      		db	0ffh
1421  FF      		db	0ffh
1422  FF      		db	0ffh
1423  FF      		db	0ffh
1424  FF      		db	0ffh
1425  FF      		db	0ffh
1426  FF      		db	0ffh
1427  FF      		db	0ffh
1428  FF      		db	0ffh
1429  FF      		db	0ffh
142A  FF      		db	0ffh
142B  FF      		db	0ffh
142C  FF      		db	0ffh
142D  FF      		db	0ffh
142E  FF      		db	0ffh
142F  FF      		db	0ffh
1430  FF      		db	0ffh
1431  FF      		db	0ffh
1432  FF      		db	0ffh
1433  FF      		db	0ffh
1434  FF      		db	0ffh
1435  FF      		db	0ffh
1436  FF      		db	0ffh
1437  FF      		db	0ffh
1438  FF      		db	0ffh
1439  FF      		db	0ffh
143A  FF      		db	0ffh
143B  FF      		db	0ffh
143C  FF      		db	0ffh
143D  FF      		db	0ffh
143E  FF      		db	0ffh
143F  FF      		db	0ffh
1440  FF      		db	0ffh
1441  FF      		db	0ffh
1442  FF      		db	0ffh
1443  FF      		db	0ffh
1444  FF      		db	0ffh
1445  FF      		db	0ffh
1446  FF      		db	0ffh
1447  FF      		db	0ffh
1448  FF      		db	0ffh
1449  FF      		db	0ffh
144A  FF      		db	0ffh
144B  FF      		db	0ffh
144C  FF      		db	0ffh
144D  FF      		db	0ffh
144E  FF      		db	0ffh
144F  FF      		db	0ffh
1450  FF      		db	0ffh
1451  FF      		db	0ffh
1452  FF      		db	0ffh
1453  FF      		db	0ffh
1454  FF      		db	0ffh
1455  FF      		db	0ffh
1456  FF      		db	0ffh
1457  FF      		db	0ffh
1458  FF      		db	0ffh
1459  FF      		db	0ffh
145A  FF      		db	0ffh
145B  FF      		db	0ffh
145C  FF      		db	0ffh
145D  FF      		db	0ffh
145E  FF      		db	0ffh
145F  FF      		db	0ffh
1460  FF      		db	0ffh
1461  FF      		db	0ffh
1462  FF      		db	0ffh
1463  FF      		db	0ffh
1464  FF      		db	0ffh
1465  FF      		db	0ffh
1466  FF      		db	0ffh
1467  FF      		db	0ffh
1468  FF      		db	0ffh
1469  FF      		db	0ffh
146A  FF      		db	0ffh
146B  FF      		db	0ffh
146C  FF      		db	0ffh
146D  FF      		db	0ffh
146E  FF      		db	0ffh
146F  FF      		db	0ffh
1470  FF      		db	0ffh
1471  FF      		db	0ffh
1472  FF      		db	0ffh
1473  FF      		db	0ffh
1474  FF      		db	0ffh
1475  FF      		db	0ffh
1476  FF      		db	0ffh
1477  FF      		db	0ffh
1478  FF      		db	0ffh
1479  FF      		db	0ffh
147A  FF      		db	0ffh
147B  FF      		db	0ffh
147C  FF      		db	0ffh
147D  FF      		db	0ffh
147E  FF      		db	0ffh
147F  FF      		db	0ffh
1480  FF      		db	0ffh
1481  FF      		db	0ffh
1482  FF      		db	0ffh
1483  FF      		db	0ffh
1484  FF      		db	0ffh
1485  FF      		db	0ffh
1486  FF      		db	0ffh
1487  FF      		db	0ffh
1488  FF      		db	0ffh
1489  FF      		db	0ffh
148A  FF      		db	0ffh
148B  FF      		db	0ffh
148C  FF      		db	0ffh
148D  FF      		db	0ffh
148E  FF      		db	0ffh
148F  FF      		db	0ffh
1490  FF      		db	0ffh
1491  FF      		db	0ffh
1492  FF      		db	0ffh
1493  FF      		db	0ffh
1494  FF      		db	0ffh
1495  FF      		db	0ffh
1496  FF      		db	0ffh
1497  FF      		db	0ffh
1498  FF      		db	0ffh
1499  FF      		db	0ffh
149A  FF      		db	0ffh
149B  FF      		db	0ffh
149C  FF      		db	0ffh
149D  FF      		db	0ffh
149E  FF      		db	0ffh
149F  FF      		db	0ffh
14A0  FF      		db	0ffh
14A1  FF      		db	0ffh
14A2  FF      		db	0ffh
14A3  FF      		db	0ffh
14A4  FF      		db	0ffh
14A5  FF      		db	0ffh
14A6  FF      		db	0ffh
14A7  FF      		db	0ffh
14A8  FF      		db	0ffh
14A9  FF      		db	0ffh
14AA  FF      		db	0ffh
14AB  FF      		db	0ffh
14AC  FF      		db	0ffh
14AD  FF      		db	0ffh
14AE  FF      		db	0ffh
14AF  FF      		db	0ffh
14B0  FF      		db	0ffh
14B1  FF      		db	0ffh
14B2  FF      		db	0ffh
14B3  FF      		db	0ffh
14B4  FF      		db	0ffh
14B5  FF      		db	0ffh
14B6  FF      		db	0ffh
14B7  FF      		db	0ffh
14B8  FF      		db	0ffh
14B9  FF      		db	0ffh
14BA  FF      		db	0ffh
14BB  FF      		db	0ffh
14BC  FF      		db	0ffh
14BD  FF      		db	0ffh
14BE  FF      		db	0ffh
14BF  FF      		db	0ffh
14C0  FF      		db	0ffh
14C1  FF      		db	0ffh
14C2  FF      		db	0ffh
14C3  FF      		db	0ffh
14C4  FF      		db	0ffh
14C5  FF      		db	0ffh
14C6  FF      		db	0ffh
14C7  FF      		db	0ffh
14C8  FF      		db	0ffh
14C9  FF      		db	0ffh
14CA  FF      		db	0ffh
14CB  FF      		db	0ffh
14CC  FF      		db	0ffh
14CD  FF      		db	0ffh
14CE  FF      		db	0ffh
14CF  FF      		db	0ffh
14D0  FF      		db	0ffh
14D1  FF      		db	0ffh
14D2  FF      		db	0ffh
14D3  FF      		db	0ffh
14D4  FF      		db	0ffh
14D5  FF      		db	0ffh
14D6  FF      		db	0ffh
14D7  FF      		db	0ffh
14D8  FF      		db	0ffh
14D9  FF      		db	0ffh
14DA  FF      		db	0ffh
14DB  FF      		db	0ffh
14DC  FF      		db	0ffh
14DD  FF      		db	0ffh
14DE  FF      		db	0ffh
14DF  FF      		db	0ffh
14E0  FF      		db	0ffh
14E1  FF      		db	0ffh
14E2  FF      		db	0ffh
14E3  FF      		db	0ffh
14E4  FF      		db	0ffh
14E5  FF      		db	0ffh
14E6  FF      		db	0ffh
14E7  FF      		db	0ffh
14E8  FF      		db	0ffh
14E9  FF      		db	0ffh
14EA  FF      		db	0ffh
14EB  FF      		db	0ffh
14EC  FF      		db	0ffh
14ED  FF      		db	0ffh
14EE  FF      		db	0ffh
14EF  FF      		db	0ffh
14F0  FF      		db	0ffh
14F1  FF      		db	0ffh
14F2  FF      		db	0ffh
14F3  FF      		db	0ffh
14F4  FF      		db	0ffh
14F5  FF      		db	0ffh
14F6  FF      		db	0ffh
14F7  FF      		db	0ffh
14F8  FF      		db	0ffh
14F9  FF      		db	0ffh
14FA  FF      		db	0ffh
14FB  FF      		db	0ffh
14FC  FF      		db	0ffh
14FD  FF      		db	0ffh
14FE  FF      		db	0ffh
14FF  FF      		db	0ffh
1500  FF      		db	0ffh
1501  FF      		db	0ffh
1502  FF      		db	0ffh
1503  FF      		db	0ffh
1504  FF      		db	0ffh
1505  FF      		db	0ffh
1506  FF      		db	0ffh
1507  FF      		db	0ffh
1508  FF      		db	0ffh
1509  FF      		db	0ffh
150A  FF      		db	0ffh
150B  FF      		db	0ffh
150C  FF      		db	0ffh
150D  FF      		db	0ffh
150E  FF      		db	0ffh
150F  FF      		db	0ffh
1510  FF      		db	0ffh
1511  FF      		db	0ffh
1512  FF      		db	0ffh
1513  FF      		db	0ffh
1514  FF      		db	0ffh
1515  FF      		db	0ffh
1516  FF      		db	0ffh
1517  FF      		db	0ffh
1518  FF      		db	0ffh
1519  FF      		db	0ffh
151A  FF      		db	0ffh
151B  FF      		db	0ffh
151C  FF      		db	0ffh
151D  FF      		db	0ffh
151E  FF      		db	0ffh
151F  FF      		db	0ffh
1520  FF      		db	0ffh
1521  FF      		db	0ffh
1522  FF      		db	0ffh
1523  FF      		db	0ffh
1524  FF      		db	0ffh
1525  FF      		db	0ffh
1526  FF      		db	0ffh
1527  FF      		db	0ffh
1528  FF      		db	0ffh
1529  FF      		db	0ffh
152A  FF      		db	0ffh
152B  FF      		db	0ffh
152C  FF      		db	0ffh
152D  FF      		db	0ffh
152E  FF      		db	0ffh
152F  FF      		db	0ffh
1530  FF      		db	0ffh
1531  FF      		db	0ffh
1532  FF      		db	0ffh
1533  FF      		db	0ffh
1534  FF      		db	0ffh
1535  FF      		db	0ffh
1536  FF      		db	0ffh
1537  FF      		db	0ffh
1538  FF      		db	0ffh
1539  FF      		db	0ffh
153A  FF      		db	0ffh
153B  FF      		db	0ffh
153C  FF      		db	0ffh
153D  FF      		db	0ffh
153E  FF      		db	0ffh
153F  FF      		db	0ffh
1540  FF      		db	0ffh
1541  FF      		db	0ffh
1542  FF      		db	0ffh
1543  FF      		db	0ffh
1544  FF      		db	0ffh
1545  FF      		db	0ffh
1546  FF      		db	0ffh
1547  FF      		db	0ffh
1548  FF      		db	0ffh
1549  FF      		db	0ffh
154A  FF      		db	0ffh
154B  FF      		db	0ffh
154C  FF      		db	0ffh
154D  FF      		db	0ffh
154E  FF      		db	0ffh
154F  FF      		db	0ffh
1550  FF      		db	0ffh
1551  FF      		db	0ffh
1552  FF      		db	0ffh
1553  FF      		db	0ffh
1554  FF      		db	0ffh
1555  FF      		db	0ffh
1556  FF      		db	0ffh
1557  FF      		db	0ffh
1558  FF      		db	0ffh
1559  FF      		db	0ffh
155A  FF      		db	0ffh
155B  FF      		db	0ffh
155C  FF      		db	0ffh
155D  FF      		db	0ffh
155E  FF      		db	0ffh
155F  FF      		db	0ffh
1560  FF      		db	0ffh
1561  FF      		db	0ffh
1562  FF      		db	0ffh
1563  FF      		db	0ffh
1564  FF      		db	0ffh
1565  FF      		db	0ffh
1566  FF      		db	0ffh
1567  FF      		db	0ffh
1568  FF      		db	0ffh
1569  FF      		db	0ffh
156A  FF      		db	0ffh
156B  FF      		db	0ffh
156C  FF      		db	0ffh
156D  FF      		db	0ffh
156E  FF      		db	0ffh
156F  FF      		db	0ffh
1570  FF      		db	0ffh
1571  FF      		db	0ffh
1572  FF      		db	0ffh
1573  FF      		db	0ffh
1574  FF      		db	0ffh
1575  FF      		db	0ffh
1576  FF      		db	0ffh
1577  FF      		db	0ffh
1578  FF      		db	0ffh
1579  FF      		db	0ffh
157A  FF      		db	0ffh
157B  FF      		db	0ffh
157C  FF      		db	0ffh
157D  FF      		db	0ffh
157E  FF      		db	0ffh
157F  FF      		db	0ffh
1580  FF      		db	0ffh
1581  FF      		db	0ffh
1582  FF      		db	0ffh
1583  FF      		db	0ffh
1584  FF      		db	0ffh
1585  FF      		db	0ffh
1586  FF      		db	0ffh
1587  FF      		db	0ffh
1588  FF      		db	0ffh
1589  FF      		db	0ffh
158A  FF      		db	0ffh
158B  FF      		db	0ffh
158C  FF      		db	0ffh
158D  FF      		db	0ffh
158E  FF      		db	0ffh
158F  FF      		db	0ffh
1590  FF      		db	0ffh
1591  FF      		db	0ffh
1592  FF      		db	0ffh
1593  FF      		db	0ffh
1594  FF      		db	0ffh
1595  FF      		db	0ffh
1596  FF      		db	0ffh
1597  FF      		db	0ffh
1598  FF      		db	0ffh
1599  FF      		db	0ffh
159A  FF      		db	0ffh
159B  FF      		db	0ffh
159C  FF      		db	0ffh
159D  FF      		db	0ffh
159E  FF      		db	0ffh
159F  FF      		db	0ffh
15A0  FF      		db	0ffh
15A1  FF      		db	0ffh
15A2  FF      		db	0ffh
15A3  FF      		db	0ffh
15A4  FF      		db	0ffh
15A5  FF      		db	0ffh
15A6  FF      		db	0ffh
15A7  FF      		db	0ffh
15A8  FF      		db	0ffh
15A9  FF      		db	0ffh
15AA  FF      		db	0ffh
15AB  FF      		db	0ffh
15AC  FF      		db	0ffh
15AD  FF      		db	0ffh
15AE  FF      		db	0ffh
15AF  FF      		db	0ffh
15B0  FF      		db	0ffh
15B1  FF      		db	0ffh
15B2  FF      		db	0ffh
15B3  FF      		db	0ffh
15B4  FF      		db	0ffh
15B5  FF      		db	0ffh
15B6  FF      		db	0ffh
15B7  FF      		db	0ffh
15B8  FF      		db	0ffh
15B9  FF      		db	0ffh
15BA  FF      		db	0ffh
15BB  FF      		db	0ffh
15BC  FF      		db	0ffh
15BD  FF      		db	0ffh
15BE  FF      		db	0ffh
15BF  FF      		db	0ffh
15C0  FF      		db	0ffh
15C1  FF      		db	0ffh
15C2  FF      		db	0ffh
15C3  FF      		db	0ffh
15C4  FF      		db	0ffh
15C5  FF      		db	0ffh
15C6  FF      		db	0ffh
15C7  FF      		db	0ffh
15C8  FF      		db	0ffh
15C9  FF      		db	0ffh
15CA  FF      		db	0ffh
15CB  FF      		db	0ffh
15CC  FF      		db	0ffh
15CD  FF      		db	0ffh
15CE  FF      		db	0ffh
15CF  FF      		db	0ffh
15D0  FF      		db	0ffh
15D1  FF      		db	0ffh
15D2  FF      		db	0ffh
15D3  FF      		db	0ffh
15D4  FF      		db	0ffh
15D5  FF      		db	0ffh
15D6  FF      		db	0ffh
15D7  FF      		db	0ffh
15D8  FF      		db	0ffh
15D9  FF      		db	0ffh
15DA  FF      		db	0ffh
15DB  FF      		db	0ffh
15DC  FF      		db	0ffh
15DD  FF      		db	0ffh
15DE  FF      		db	0ffh
15DF  FF      		db	0ffh
15E0  FF      		db	0ffh
15E1  FF      		db	0ffh
15E2  FF      		db	0ffh
15E3  FF      		db	0ffh
15E4  FF      		db	0ffh
15E5  FF      		db	0ffh
15E6  FF      		db	0ffh
15E7  FF      		db	0ffh
15E8  FF      		db	0ffh
15E9  FF      		db	0ffh
15EA  FF      		db	0ffh
15EB  FF      		db	0ffh
15EC  FF      		db	0ffh
15ED  FF      		db	0ffh
15EE  FF      		db	0ffh
15EF  FF      		db	0ffh
15F0  FF      		db	0ffh
15F1  FF      		db	0ffh
15F2  FF      		db	0ffh
15F3  FF      		db	0ffh
15F4  FF      		db	0ffh
15F5  FF      		db	0ffh
15F6  FF      		db	0ffh
15F7  FF      		db	0ffh
15F8  FF      		db	0ffh
15F9  FF      		db	0ffh
15FA  FF      		db	0ffh
15FB  FF      		db	0ffh
15FC  FF      		db	0ffh
15FD  FF      		db	0ffh
15FE  FF      		db	0ffh
15FF  FF      		db	0ffh
1600  FF      		db	0ffh
1601  FF      		db	0ffh
1602  FF      		db	0ffh
1603  FF      		db	0ffh
1604  FF      		db	0ffh
1605  FF      		db	0ffh
1606  FF      		db	0ffh
1607  FF      		db	0ffh
1608  FF      		db	0ffh
1609  FF      		db	0ffh
160A  FF      		db	0ffh
160B  FF      		db	0ffh
160C  FF      		db	0ffh
160D  FF      		db	0ffh
160E  FF      		db	0ffh
160F  FF      		db	0ffh
1610  FF      		db	0ffh
1611  FF      		db	0ffh
1612  FF      		db	0ffh
1613  FF      		db	0ffh
1614  FF      		db	0ffh
1615  FF      		db	0ffh
1616  FF      		db	0ffh
1617  FF      		db	0ffh
1618  FF      		db	0ffh
1619  FF      		db	0ffh
161A  FF      		db	0ffh
161B  FF      		db	0ffh
161C  FF      		db	0ffh
161D  FF      		db	0ffh
161E  FF      		db	0ffh
161F  FF      		db	0ffh
1620  FF      		db	0ffh
1621  FF      		db	0ffh
1622  FF      		db	0ffh
1623  FF      		db	0ffh
1624  FF      		db	0ffh
1625  FF      		db	0ffh
1626  FF      		db	0ffh
1627  FF      		db	0ffh
1628  FF      		db	0ffh
1629  FF      		db	0ffh
162A  FF      		db	0ffh
162B  FF      		db	0ffh
162C  FF      		db	0ffh
162D  FF      		db	0ffh
162E  FF      		db	0ffh
162F  FF      		db	0ffh
1630  FF      		db	0ffh
1631  FF      		db	0ffh
1632  FF      		db	0ffh
1633  FF      		db	0ffh
1634  FF      		db	0ffh
1635  FF      		db	0ffh
1636  FF      		db	0ffh
1637  FF      		db	0ffh
1638  FF      		db	0ffh
1639  FF      		db	0ffh
163A  FF      		db	0ffh
163B  FF      		db	0ffh
163C  FF      		db	0ffh
163D  FF      		db	0ffh
163E  FF      		db	0ffh
163F  FF      		db	0ffh
1640  FF      		db	0ffh
1641  FF      		db	0ffh
1642  FF      		db	0ffh
1643  FF      		db	0ffh
1644  FF      		db	0ffh
1645  FF      		db	0ffh
1646  FF      		db	0ffh
1647  FF      		db	0ffh
1648  FF      		db	0ffh
1649  FF      		db	0ffh
164A  FF      		db	0ffh
164B  FF      		db	0ffh
164C  FF      		db	0ffh
164D  FF      		db	0ffh
164E  FF      		db	0ffh
164F  FF      		db	0ffh
1650  FF      		db	0ffh
1651  FF      		db	0ffh
1652  FF      		db	0ffh
1653  FF      		db	0ffh
1654  FF      		db	0ffh
1655  FF      		db	0ffh
1656  FF      		db	0ffh
1657  FF      		db	0ffh
1658  FF      		db	0ffh
1659  FF      		db	0ffh
165A  FF      		db	0ffh
165B  FF      		db	0ffh
165C  FF      		db	0ffh
165D  FF      		db	0ffh
165E  FF      		db	0ffh
165F  FF      		db	0ffh
1660  FF      		db	0ffh
1661  FF      		db	0ffh
1662  FF      		db	0ffh
1663  FF      		db	0ffh
1664  FF      		db	0ffh
1665  FF      		db	0ffh
1666  FF      		db	0ffh
1667  FF      		db	0ffh
1668  FF      		db	0ffh
1669  FF      		db	0ffh
166A  FF      		db	0ffh
166B  FF      		db	0ffh
166C  FF      		db	0ffh
166D  FF      		db	0ffh
166E  FF      		db	0ffh
166F  FF      		db	0ffh
1670  FF      		db	0ffh
1671  FF      		db	0ffh
1672  FF      		db	0ffh
1673  FF      		db	0ffh
1674  FF      		db	0ffh
1675  FF      		db	0ffh
1676  FF      		db	0ffh
1677  FF      		db	0ffh
1678  FF      		db	0ffh
1679  FF      		db	0ffh
167A  FF      		db	0ffh
167B  FF      		db	0ffh
167C  FF      		db	0ffh
167D  FF      		db	0ffh
167E  FF      		db	0ffh
167F  FF      		db	0ffh
1680  FF      		db	0ffh
1681  FF      		db	0ffh
1682  FF      		db	0ffh
1683  FF      		db	0ffh
1684  FF      		db	0ffh
1685  FF      		db	0ffh
1686  FF      		db	0ffh
1687  FF      		db	0ffh
1688  FF      		db	0ffh
1689  FF      		db	0ffh
168A  FF      		db	0ffh
168B  FF      		db	0ffh
168C  FF      		db	0ffh
168D  FF      		db	0ffh
168E  FF      		db	0ffh
168F  FF      		db	0ffh
1690  FF      		db	0ffh
1691  FF      		db	0ffh
1692  FF      		db	0ffh
1693  FF      		db	0ffh
1694  FF      		db	0ffh
1695  FF      		db	0ffh
1696  FF      		db	0ffh
1697  FF      		db	0ffh
1698  FF      		db	0ffh
1699  FF      		db	0ffh
169A  FF      		db	0ffh
169B  FF      		db	0ffh
169C  FF      		db	0ffh
169D  FF      		db	0ffh
169E  FF      		db	0ffh
169F  FF      		db	0ffh
16A0  FF      		db	0ffh
16A1  FF      		db	0ffh
16A2  FF      		db	0ffh
16A3  FF      		db	0ffh
16A4  FF      		db	0ffh
16A5  FF      		db	0ffh
16A6  FF      		db	0ffh
16A7  FF      		db	0ffh
16A8  FF      		db	0ffh
16A9  FF      		db	0ffh
16AA  FF      		db	0ffh
16AB  FF      		db	0ffh
16AC  FF      		db	0ffh
16AD  FF      		db	0ffh
16AE  FF      		db	0ffh
16AF  FF      		db	0ffh
16B0  FF      		db	0ffh
16B1  FF      		db	0ffh
16B2  FF      		db	0ffh
16B3  FF      		db	0ffh
16B4  FF      		db	0ffh
16B5  FF      		db	0ffh
16B6  FF      		db	0ffh
16B7  FF      		db	0ffh
16B8  FF      		db	0ffh
16B9  FF      		db	0ffh
16BA  FF      		db	0ffh
16BB  FF      		db	0ffh
16BC  FF      		db	0ffh
16BD  FF      		db	0ffh
16BE  FF      		db	0ffh
16BF  FF      		db	0ffh
16C0  FF      		db	0ffh
16C1  FF      		db	0ffh
16C2  FF      		db	0ffh
16C3  FF      		db	0ffh
16C4  FF      		db	0ffh
16C5  FF      		db	0ffh
16C6  FF      		db	0ffh
16C7  FF      		db	0ffh
16C8  FF      		db	0ffh
16C9  FF      		db	0ffh
16CA  FF      		db	0ffh
16CB  FF      		db	0ffh
16CC  FF      		db	0ffh
16CD  FF      		db	0ffh
16CE  FF      		db	0ffh
16CF  FF      		db	0ffh
16D0  FF      		db	0ffh
16D1  FF      		db	0ffh
16D2  FF      		db	0ffh
16D3  FF      		db	0ffh
16D4  FF      		db	0ffh
16D5  FF      		db	0ffh
16D6  FF      		db	0ffh
16D7  FF      		db	0ffh
16D8  FF      		db	0ffh
16D9  FF      		db	0ffh
16DA  FF      		db	0ffh
16DB  FF      		db	0ffh
16DC  FF      		db	0ffh
16DD  FF      		db	0ffh
16DE  FF      		db	0ffh
16DF  FF      		db	0ffh
16E0  FF      		db	0ffh
16E1  FF      		db	0ffh
16E2  FF      		db	0ffh
16E3  FF      		db	0ffh
16E4  FF      		db	0ffh
16E5  FF      		db	0ffh
16E6  FF      		db	0ffh
16E7  FF      		db	0ffh
16E8  FF      		db	0ffh
16E9  FF      		db	0ffh
16EA  FF      		db	0ffh
16EB  FF      		db	0ffh
16EC  FF      		db	0ffh
16ED  FF      		db	0ffh
16EE  FF      		db	0ffh
16EF  FF      		db	0ffh
16F0  FF      		db	0ffh
16F1  FF      		db	0ffh
16F2  FF      		db	0ffh
16F3  FF      		db	0ffh
16F4  FF      		db	0ffh
16F5  FF      		db	0ffh
16F6  FF      		db	0ffh
16F7  FF      		db	0ffh
16F8  FF      		db	0ffh
16F9  FF      		db	0ffh
16FA  FF      		db	0ffh
16FB  FF      		db	0ffh
16FC  FF      		db	0ffh
16FD  FF      		db	0ffh
16FE  FF      		db	0ffh
16FF  FF      		db	0ffh
1700  FF      		db	0ffh
1701  FF      		db	0ffh
1702  FF      		db	0ffh
1703  FF      		db	0ffh
1704  FF      		db	0ffh
1705  FF      		db	0ffh
1706  FF      		db	0ffh
1707  FF      		db	0ffh
1708  FF      		db	0ffh
1709  FF      		db	0ffh
170A  FF      		db	0ffh
170B  FF      		db	0ffh
170C  FF      		db	0ffh
170D  FF      		db	0ffh
170E  FF      		db	0ffh
170F  FF      		db	0ffh
1710  FF      		db	0ffh
1711  FF      		db	0ffh
1712  FF      		db	0ffh
1713  FF      		db	0ffh
1714  FF      		db	0ffh
1715  FF      		db	0ffh
1716  FF      		db	0ffh
1717  FF      		db	0ffh
1718  FF      		db	0ffh
1719  FF      		db	0ffh
171A  FF      		db	0ffh
171B  FF      		db	0ffh
171C  FF      		db	0ffh
171D  FF      		db	0ffh
171E  FF      		db	0ffh
171F  FF      		db	0ffh
1720  FF      		db	0ffh
1721  FF      		db	0ffh
1722  FF      		db	0ffh
1723  FF      		db	0ffh
1724  FF      		db	0ffh
1725  FF      		db	0ffh
1726  FF      		db	0ffh
1727  FF      		db	0ffh
1728  FF      		db	0ffh
1729  FF      		db	0ffh
172A  FF      		db	0ffh
172B  FF      		db	0ffh
172C  FF      		db	0ffh
172D  FF      		db	0ffh
172E  FF      		db	0ffh
172F  FF      		db	0ffh
1730  FF      		db	0ffh
1731  FF      		db	0ffh
1732  FF      		db	0ffh
1733  FF      		db	0ffh
1734  FF      		db	0ffh
1735  FF      		db	0ffh
1736  FF      		db	0ffh
1737  FF      		db	0ffh
1738  FF      		db	0ffh
1739  FF      		db	0ffh
173A  FF      		db	0ffh
173B  FF      		db	0ffh
173C  FF      		db	0ffh
173D  FF      		db	0ffh
173E  FF      		db	0ffh
173F  FF      		db	0ffh
1740  FF      		db	0ffh
1741  FF      		db	0ffh
1742  FF      		db	0ffh
1743  FF      		db	0ffh
1744  FF      		db	0ffh
1745  FF      		db	0ffh
1746  FF      		db	0ffh
1747  FF      		db	0ffh
1748  FF      		db	0ffh
1749  FF      		db	0ffh
174A  FF      		db	0ffh
174B  FF      		db	0ffh
174C  FF      		db	0ffh
174D  FF      		db	0ffh
174E  FF      		db	0ffh
174F  FF      		db	0ffh
1750  FF      		db	0ffh
1751  FF      		db	0ffh
1752  FF      		db	0ffh
1753  FF      		db	0ffh
1754  FF      		db	0ffh
1755  FF      		db	0ffh
1756  FF      		db	0ffh
1757  FF      		db	0ffh
1758  FF      		db	0ffh
1759  FF      		db	0ffh
175A  FF      		db	0ffh
175B  FF      		db	0ffh
175C  FF      		db	0ffh
175D  FF      		db	0ffh
175E  FF      		db	0ffh
175F  FF      		db	0ffh
1760  FF      		db	0ffh
1761  FF      		db	0ffh
1762  FF      		db	0ffh
1763  FF      		db	0ffh
1764  FF      		db	0ffh
1765  FF      		db	0ffh
1766  FF      		db	0ffh
1767  FF      		db	0ffh
1768  FF      		db	0ffh
1769  FF      		db	0ffh
176A  FF      		db	0ffh
176B  FF      		db	0ffh
176C  FF      		db	0ffh
176D  FF      		db	0ffh
176E  FF      		db	0ffh
176F  FF      		db	0ffh
1770  FF      		db	0ffh
1771  FF      		db	0ffh
1772  FF      		db	0ffh
1773  FF      		db	0ffh
1774  FF      		db	0ffh
1775  FF      		db	0ffh
1776  FF      		db	0ffh
1777  FF      		db	0ffh
1778  FF      		db	0ffh
1779  FF      		db	0ffh
177A  FF      		db	0ffh
177B  FF      		db	0ffh
177C  FF      		db	0ffh
177D  FF      		db	0ffh
177E  FF      		db	0ffh
177F  FF      		db	0ffh
1780  FF      		db	0ffh
1781  FF      		db	0ffh
1782  FF      		db	0ffh
1783  FF      		db	0ffh
1784  FF      		db	0ffh
1785  FF      		db	0ffh
1786  FF      		db	0ffh
1787  FF      		db	0ffh
1788  FF      		db	0ffh
1789  FF      		db	0ffh
178A  FF      		db	0ffh
178B  FF      		db	0ffh
178C  FF      		db	0ffh
178D  FF      		db	0ffh
178E  FF      		db	0ffh
178F  FF      		db	0ffh
1790  FF      		db	0ffh
1791  FF      		db	0ffh
1792  FF      		db	0ffh
1793  FF      		db	0ffh
1794  FF      		db	0ffh
1795  FF      		db	0ffh
1796  FF      		db	0ffh
1797  FF      		db	0ffh
1798  FF      		db	0ffh
1799  FF      		db	0ffh
179A  FF      		db	0ffh
179B  FF      		db	0ffh
179C  FF      		db	0ffh
179D  FF      		db	0ffh
179E  FF      		db	0ffh
179F  FF      		db	0ffh
17A0  FF      		db	0ffh
17A1  FF      		db	0ffh
17A2  FF      		db	0ffh
17A3  FF      		db	0ffh
17A4  FF      		db	0ffh
17A5  FF      		db	0ffh
17A6  FF      		db	0ffh
17A7  FF      		db	0ffh
17A8  FF      		db	0ffh
17A9  FF      		db	0ffh
17AA  FF      		db	0ffh
17AB  FF      		db	0ffh
17AC  FF      		db	0ffh
17AD  FF      		db	0ffh
17AE  FF      		db	0ffh
17AF  FF      		db	0ffh
17B0  FF      		db	0ffh
17B1  FF      		db	0ffh
17B2  FF      		db	0ffh
17B3  FF      		db	0ffh
17B4  FF      		db	0ffh
17B5  FF      		db	0ffh
17B6  FF      		db	0ffh
17B7  FF      		db	0ffh
17B8  FF      		db	0ffh
17B9  FF      		db	0ffh
17BA  FF      		db	0ffh
17BB  FF      		db	0ffh
17BC  FF      		db	0ffh
17BD  FF      		db	0ffh
17BE  FF      		db	0ffh
17BF  FF      		db	0ffh
17C0  FF      		db	0ffh
17C1  FF      		db	0ffh
17C2  FF      		db	0ffh
17C3  FF      		db	0ffh
17C4  FF      		db	0ffh
17C5  FF      		db	0ffh
17C6  FF      		db	0ffh
17C7  FF      		db	0ffh
17C8  FF      		db	0ffh
17C9  FF      		db	0ffh
17CA  FF      		db	0ffh
17CB  FF      		db	0ffh
17CC  FF      		db	0ffh
17CD  FF      		db	0ffh
17CE  FF      		db	0ffh
17CF  FF      		db	0ffh
17D0  FF      		db	0ffh
17D1  FF      		db	0ffh
17D2  FF      		db	0ffh
17D3  FF      		db	0ffh
17D4  FF      		db	0ffh
17D5  FF      		db	0ffh
17D6  FF      		db	0ffh
17D7  FF      		db	0ffh
17D8  FF      		db	0ffh
17D9  FF      		db	0ffh
17DA  FF      		db	0ffh
17DB  FF      		db	0ffh
17DC  FF      		db	0ffh
17DD  FF      		db	0ffh
17DE  FF      		db	0ffh
17DF  FF      		db	0ffh
17E0  FF      		db	0ffh
17E1  FF      		db	0ffh
17E2  FF      		db	0ffh
17E3  FF      		db	0ffh
17E4  FF      		db	0ffh
17E5  FF      		db	0ffh
17E6  FF      		db	0ffh
17E7  FF      		db	0ffh
17E8  FF      		db	0ffh
17E9  FF      		db	0ffh
17EA  FF      		db	0ffh
17EB  FF      		db	0ffh
17EC  FF      		db	0ffh
17ED  FF      		db	0ffh
17EE  FF      		db	0ffh
17EF  FF      		db	0ffh
17F0  FF      		db	0ffh
17F1  FF      		db	0ffh
17F2  FF      		db	0ffh
17F3  FF      		db	0ffh
17F4  FF      		db	0ffh
17F5  FF      		db	0ffh
17F6  FF      		db	0ffh
17F7  FF      		db	0ffh
17F8  FF      		db	0ffh
17F9  FF      		db	0ffh
17FA  FF      		db	0ffh
17FB  FF      		db	0ffh
17FC  FF      		db	0ffh
17FD  FF      		db	0ffh
17FE  FF      		db	0ffh
17FF  FF      		db	0ffh
0000          	if	($ <> 1800h)
		endif
1800          		end



Statistics:

     4	passes
     0	jr promotions
   413	symbols
  6144	bytes

  2945	macro calls
  4032	macro bytes
     0	invented symbols
