;	MACRO LIBRARY FOR STREET TREADLES
;
TRINP	EQU	01H	;TREADLE INPUT PORT
TROUT	EQU	01H	;TREADLE OUTPUT PORT
;
TREAD?	MACRO	TR,IFTRUE
;;	"TREAD?" IS INVOKED TO CHECK IF
;;	TREADLE GIVEN BY TR HAS BEEN SENSED.
;;	IF SO, THE LATCH IS CLEARED AND CONTROL
;;	TRANSFERS TO THE LABEL "IFTRUE"
	LOCAL	IFFALSE		;;IN CASE NOT SET
;;
	IN	TRINP	;;READ TREADLE SWITCHES
	ANI	1 SHL TR	;;MASK PROPER BIT
	JZ	IFFALSE		;;SKIP RESET IF 0
	MVI	A,1 SHL TR	;;TO RESET THE BIT
	OUT	TROUT		;;CLEAR IT
	JMP	IFTRUE		;;GO TO TRUE LABEL
IFFALSE:
	ENDM
